(self.webpackChunkapp_studio_enterprise_marketing_campaign=self.webpackChunkapp_studio_enterprise_marketing_campaign||[]).push([[9672],{19672:(on,Pt,d)=>{var j=d(71252),At=d(74369),v=d(63721),i=d(59131),X=d(3633),S=d(79772),u=d(5960),M=d(73308);const B="00000000-0000-0000-0000-000000000000",K=null;function O(t){let e="";for(let n=0;n<t;n++)e+=((1+Math.random())*65536|0).toString(16).substring(1);return e}function Y(){return[O(2),O(1),O(1),O(1),O(3)].join("-")}function Ls(t){return!!t&&K.test(t)}function Ns(t){return!t||t===B}class an extends Error{constructor(){super("Next handler already specified")}}var z=d(28399);class cn{constructor(){this._refs=new Set,this.lazyLoadingDisabled=!1}static{this._globalInstancePath="creatio._lazyModulesManager"}static get instance(){if(!this._instance){let e=(0,z.get)(window,this._globalInstancePath);e||(e=new this,(0,z.set)(window,this._globalInstancePath,e)),this._instance=e}return this._instance}add(e){this._refs.add(e)}size(){return this._refs.size}loadAll(){return Promise.all(Array.from(this._refs).map(e=>e.loadAndBootstrap()))}clear(){this._refs.clear()}}var lt;(function(t){t[t.Schema=0]="Schema",t[t.Remote=1]="Remote",t[t.Host=2]="Host"})(lt||(lt={}));const kt=window;class ln{constructor(){this.store={typeInfos:new Map}}static{this._prefix="creatio.registry."}static get store(){if(!this._instance){let e=(0,z.get)(kt,this._prefix+this.registryKey);e||(e=new this,(0,z.set)(kt,this._prefix+this.registryKey,e)),this._instance=e}return this._instance.store}}class un extends ln{static{this.registryKey="pkgTopology"}static get items(){return this.store.typeInfos}static get(e){const n=this.items.get(e);if(n===void 0)throw new Error(`Package with name ${e} not found in topology`);return n}}class dn{constructor(e){this._request=e;const n=[...this._request.scopes??[]].reverse().map((s,r)=>[s,r]);this._scopesOrder=Object.fromEntries(n)}_getOrderByScopes(e){if(!e.scopes)return Number.MAX_VALUE;const n=e.scopes.filter(s=>s in this._scopesOrder).map(s=>this._scopesOrder[s]);return Math.min(...n)}_getOrderByPkgTopology(e){return e.source.type===lt.Host?Number.MAX_VALUE:un.get(e.source.packageName)}compare(e,n){const s=this._getOrderByScopes(e),r=this._getOrderByScopes(n);let o=s-r;if(o)return o;const a=this._getOrderByPkgTopology(e),h=this._getOrderByPkgTopology(n);return o=a-h,o||(o=e.source.type-n.source.type,o)}}var Ds=d(4930);const Tt="module",jt="viewElement",ut="interfaceDesignerItem",Rt="requestHandler",Lt="designTimeViewElement",Nt="validator",Dt="converter";function Fs(t,e){Reflect.defineMetadata(Tt,t,e)}function hn(t){const e=Reflect.getMetadata(Tt,t);if(!e)throw new Error(`Module metadata was not found on '${t.name}' class`);return e}function Us(t,e){Reflect.defineMetadata(jt,t,e)}function Bs(t){const e=Reflect.getMetadata(jt,t);if(!e)throw new Error(`View element metadata was not found on '${t.name}' class`);return e}function Ks(t,e){Reflect.defineMetadata(Nt,t,e)}function zs(t){const e=Reflect.getOwnMetadata(Nt,t);if(!e)throw new Error(`Validator metadata was not found on '${t.name}' class`);return e}function $s(t,e){Reflect.defineMetadata(Dt,t,e)}function Hs(t){const e=Reflect.getOwnMetadata(Dt,t);if(!e)throw new Error(`Converter metadata was not found on '${t.name}' class`);return e}function Js(t,e){Reflect.defineMetadata(ut,t,e)}function Gs(t){const e=Reflect.getOwnMetadata(ut,t);if(!e)throw new Error(`Interface designer item metadata was not found on '${t.name}' class`);return e}function Ws(t,e){Reflect.defineMetadata(Lt,t,e)}function Vs(t){const e=Reflect.getOwnMetadata(Lt,t);if(!e)throw new Error(`Design time view element metadata was not found on '${t.name}' class`);return e}function Zs(t){return Reflect.hasOwnMetadata(ut,t)}function Xs(t,e){Reflect.defineMetadata(Rt,t,e)}function Ys(t){const e=Reflect.getMetadata(Rt,t);if(!e)throw new Error(`Request handler metadata was not found on '${t.name}' class`);return e}function qs(t){const e=Reflect.getMetadata("requestType",t);if(!e)throw new Error(`requestType was not found on '${t.name}' class`);return{requestType:e,typeRef:t}}function Qs(t){const n=Reflect.getMetadataKeys(t).filter(s=>s.startsWith(crtInputPrefix));return Object.fromEntries(n.map(s=>{const r=Reflect.getMetadata(s,t);return[s.replace(crtInputPrefix,""),r]}))}function ei(t){const n=Reflect.getMetadataKeys(t).filter(s=>s.startsWith(crtOutputPrefix));return Object.fromEntries(n.map(s=>{const r=Reflect.getMetadata(s,t);return[s.replace(crtOutputPrefix,""),r]}))}function ti(t){const n=Reflect.getMetadataKeys(t).filter(s=>s.startsWith(crtValidationInputPrefix));return Object.fromEntries(n.map(s=>{const r=Reflect.getMetadata(s,t);return[s.replace(crtValidationInputPrefix,""),r]}))}function mn(t){const n=Reflect.getOwnMetadataKeys(t).filter(s=>s.startsWith(crtInjectPrefix));return Object.fromEntries(n.map(s=>{const r=Number(s.replace(crtInjectPrefix,"")),o=Reflect.getMetadata(s,t);return[r,o]}))}function pn(t){const e=t.prototype?Object.getPrototypeOf(t.prototype):null;return e?e.constructor:null}function fn(t){const e=Reflect.getOwnMetadata("design:paramtypes",t);if(!e){if(t.length>0)throw new Error(`Dependency Injection error. Cannot read dependencies of class '${t.name}'. Please make sure class '${t.name}' has decorator and 'emitDecoratorMetadata' option is enabled in your 'tsconfig.json' file.`);const s=pn(t);return s&&s!==Object?fn(s):[]}const n=mn(t);return Object.entries(n).forEach(([s,r])=>e[s]=r),e}function gn(t){console.error("Not supported: lazy modules should not be dependent on other lazy modules. Some functions may not work correctly",t)}function _n(t){if(!Array.isArray(t))return[];if(t.length===0)return[];const e=new Set,n=[...t];for(;n.length>0;){const s=n.pop();if(!s||e.has(s))continue;if(typeof s!="function"){gn(s);continue}e.add(s);const r=hn(s)?.includes||[];n.push(...r)}return[...e]}function Cn(t,e){return t?.length?t.some(n=>e?.includes(n)):!0}const dt=window;dt.creatio??={},dt.creatio._bootstrappedCrtModules??=new Map;const wn=dt.creatio._bootstrappedCrtModules;function ht(t){wn.forEach((e,n)=>{e.root&&t(e,n)})}function ni(t){ht(e=>e.options?.onContextCreate?.(t))}function En(t){ht(e=>e.options?.onContextUpdate?.(t))}function si(t){ht(e=>e.options?.onContextDestroy?.(t))}class vn{constructor(){var e=this;this._handlers=[],this._requestListeners=new Map,this._handlersCache=new Map,this._handlersScopesByContextId=new Map,this.handlerChain$={process:function(){var n=(0,M.A)(function*(s){let r;if(e._hasCacheHandler(s))r=e._getCacheHandler(s);else{const o=e._getMatchedHandlers(s);cn.instance.lazyLoadingDisabled||(yield e._loadLazyHandlers(s,o)),r=e._buildHandlersChain(s,o)}return e._requestListeners.forEach(o=>o?.(s)),r?.handle(s)});return function(r){return n.apply(this,arguments)}}(),register:n=>(this._handlersCache.delete(n.requestType),this._handlers.push(n),()=>{const s=this._handlers.indexOf(n);s>-1?(this._handlers.splice(s,1),this._handlersCache.delete(n.requestType)):console.warn(`${n?.requestType} not found to unsubscribe`)}),update:n=>{const s=this._handlers.find(r=>r.type===n.type);s&&(s.createHandler=n.createHandler)},subscribe:(n,s)=>{if(!n)return()=>{};const r=Y(),o=a=>{(!s||a.$context===s)&&n(a)};return this._requestListeners.set(r,o),()=>this._requestListeners.delete(r)}}}clearContextedHandlersCache(e){return(this._handlersScopesByContextId.get(e)??[]).every(({requestType:s,scope:r})=>this._handlersCache.get(s)?.delete(r))}clear(){this._handlers.splice(0),this._requestListeners.clear(),this._handlersCache.clear(),this._handlersScopesByContextId.clear()}_getCacheHandler(e){const n=this._handlersCache.get(e.type),s=this._getCacheScopesKey(e);return n.get(s)}_hasCacheHandler(e){const n=this._handlersCache.get(e.type),s=this._getCacheScopesKey(e);return n&&n.has(s)}_getCacheScopesKey(e){const n=this._getInjectionContext(e?.$context)?.id??"";return(e.scopes||[""]).join("_").concat(n)}_getInjectionContext(e){return e?._injectionContext||e?.parent&&this._getInjectionContext(e.parent)}_setContextedScopes(e,n){const s=this._getInjectionContext(e?.$context)?.id,r=this._handlersScopesByContextId.has(s)?this._handlersScopesByContextId.get(s):[];r.push({requestType:e.type,scope:n}),this._handlersScopesByContextId.set(s,r)}_setCacheHandler(e,n){const s=this._handlersCache.has(e.type)?this._handlersCache.get(e.type):new Map,r=this._getCacheScopesKey(e);s.set(r,n),this._getInjectionContext(e?.$context)?.id&&this._setContextedScopes(e,r),this._handlersCache.set(e.type,s)}_isRequestHandler(e){return typeof e.handle=="function"&&typeof e.setNext=="function"}_checkHandlerInstanceOf(e){if(!this._isRequestHandler(e))throw new Error('Handler should implement "BaseRequestHandler"')}_loadLazyHandlers(e,n){var s=this;return(0,M.A)(function*(){const r=new Set;n.forEach(h=>{h.lazy&&!h.createHandler&&r.add(h.lazyModuleRef)});const o=[...r];yield Promise.all(o.map(h=>h.loadAndBootstrap()));const a=s._getInjectionContext(e?.$context);if(a&&r.size){const h=yield _n(o.map(E=>E.typeRef));for(const E of h)a.addLazyModule(E);En(a)}})()}_getMatchedHandlers(e){return this._handlers.filter(n=>n.requestType!==e.type?!1:Cn(n.scopes,e.scopes))}_buildHandlersChain(e,n){const s=new dn(e);n.sort((h,E)=>s.compare(h,E));const r=this._getInjectionContext(e?.$context),o=n.map(h=>h.createHandler.call(h,r));o.forEach(h=>this._checkHandlerInstanceOf(h)),this._joinHandlersInChain(o);const a=o[0];return this._setCacheHandler(e,a),a}_joinHandlersInChain(e){for(let n=0;n<e.length-1;n++)try{e[n].setNext(e[n+1])}catch(s){throw s instanceof an?new Error("Handler factory should return new instance of BaseRequestHandler class or its subclass (next handler should not be specified)"):s}}}const Ft=window;class le{get _chain(){return Ft.handlerChain}set _chain(e){Ft.handlerChain=e}static get instance(){return le._instance||(le._instance=new le)}constructor(){this._chain||this._createGlobalHandlerChain()}_createGlobalHandlerChain(){this._chain=new vn}clearContextedHandlersCache(e){return this._chain.clearContextedHandlersCache(e)}register(e){return this._chain.handlerChain$.register(e)}update(e){return this._chain.handlerChain$.update(e)}process(e){return this._chain.handlerChain$.process(e)}subscribe(e,n){return this._chain.handlerChain$.subscribe(e,n)}clear(){this._chain.clear()}}function xe(t){return function(e,n,s){const r=function(...o){return le.instance.process({type:t?.requestType?t.requestType:this.requestType,method:t?.methodName?t.methodName:n,args:o})};s?s.value=r:e[n]=r}}class bn{}class R extends bn{constructor(){super(...arguments),this.requestType="crt.SysSettingsService"}}(0,u.__decorate)([xe(),(0,u.__metadata)("design:type",Function)],R.prototype,"getByCodes",void 0),(0,u.__decorate)([xe(),(0,u.__metadata)("design:type",Function)],R.prototype,"getByCode",void 0),(0,u.__decorate)([xe(),(0,u.__metadata)("design:type",Function)],R.prototype,"update",void 0),(0,u.__decorate)([xe(),(0,u.__metadata)("design:type",Function)],R.prototype,"updateMany",void 0);const In="DataService/json/SyncReply",On="DataService/ssp/json/SyncReply";var p=d(62278);const yn="A5420246-0A8E-E111-84A3-00155D054C03",xn="en-US";class Se{constructor(e){Object.assign(this,e)}static getDefaultCulture(){return new Se({sysCultureId:yn,sysCultureName:xn,decimalSeparator:".",thousandSeparator:","})}}class Sn{constructor(){const e=this.constructor;if((0,i.inject)(e,i.InjectFlags.Optional|i.InjectFlags.SkipSelf))throw Error(`[${e.name}]: trying to create multiple instances,
			but this service should be a singleton.`)}}class Ut{constructor(){this.cultureInfo=new Se,this.defCultureInfo=new Se}}const I="Information about the current user is not initialized yet. Use UserInfoService to load current user information.";function Mn(){return{get id(){throw new ReferenceError(I)},get contactId(){throw new ReferenceError(I)},get contactName(){throw new ReferenceError(I)},get accountId(){throw new ReferenceError(I)},get accountName(){throw new ReferenceError(I)},get isSSP(){throw new ReferenceError(I)},get timeZoneId(){throw new ReferenceError(I)},get cultureInfo(){throw new ReferenceError(I)},get defCultureInfo(){throw new ReferenceError(I)},get timeZoneOffsetHours(){throw new ReferenceError(I)},get photoId(){throw new ReferenceError(I)},get accessType(){throw new ReferenceError(I)},get sessionId(){throw new ReferenceError(I)}}}const g=Mn(),Bt={get id(){return g.id},get contactId(){return g.contactId},get contactName(){return g.contactName},get accountId(){return g.accountId},get accountName(){return g.accountName},get isSSP(){return g.isSSP},get timeZoneId(){return g.timeZoneId},get cultureInfo(){return g.cultureInfo},get defCultureInfo(){return g.defCultureInfo},get timeZoneOffsetHours(){return g.timeZoneOffsetHours},get photoId(){return g.photoId},get accessType(){return g.accessType},get sessionId(){return g.sessionId}};Object.freeze(Bt);const ii={provide:Ut,useFactory:()=>Bt};class Me extends Sn{constructor(e){super(),this._httpClient=e,this._serviceEndpoint="/ServiceModel/UserInfoService.svc"}_applyUserInfo(e){Object.keys(g).forEach(n=>{delete g[n]}),Object.assign(g,e)}loadCurrentUserInfo(){if(!this._userInfo$){const e=`${this._serviceEndpoint}/GetCurrentUserInfo`;this._userInfo$=this._httpClient.post(e,null).pipe((0,p.tap)(n=>{this._applyUserInfo(n?.userInfo)}),(0,p.shareReplay)({bufferSize:1,refCount:!1}))}return this._userInfo$}static{this.\u0275fac=function(n){return new(n||Me)(i.\u0275\u0275inject(v.HttpClient))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Me,factory:Me.\u0275fac,providedIn:"root"})}}const Pe=new i.InjectionToken("DataServiceUri"),Kt={provide:Pe,useFactory:t=>t?.isSSP?On:In,deps:[[new i.Optional,Ut]]};class L{static{this.\u0275fac=function(n){return new(n||L)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:L,factory:L.\u0275fac})}}var y=d(40297),f=d(36486);const Pn=new i.InjectionToken("CustomEventApplicationIdToken"),ri=new i.InjectionToken("CustomEventServiceToken");class Ae{constructor(e,n=null){this.document=e,this.appId=n,this.customEventName="TSCustomEventChannel",this.appId=n||Math.random().toString()}subscribe(e){return this.customEventObserver$=this.customEventObserver$||(0,p.fromEvent)(document,this.customEventName),this.customEventObserver$.pipe((0,f.filter)(n=>n.detail.eventName===e&&n.detail.sender!==this.appId),(0,f.map)(n=>n.detail.payload))}createOutboundChannel(e){const n=new p.Subject;return n.asObservable().subscribe(s=>{const r=new CustomEvent(this.customEventName,{detail:{eventName:e,sender:this.appId,payload:s}});this.document.dispatchEvent(r)}),n}getDataViaEvent(e,n={}){return new p.Observable(s=>{this.subscribe(e).pipe((0,f.first)()).subscribe(r=>{s.next(r),s.complete()}),this.createOutboundChannel(e).next(n)})}getDataStreamViaEvent(e,n={}){return new p.Observable(s=>{const r=this.subscribe(e).subscribe(o=>{s.next(o)},p.noop,()=>s.complete());return this.createOutboundChannel(e).next(n),()=>{r.unsubscribe()}})}static{this.\u0275fac=function(n){return new(n||Ae)(i.\u0275\u0275inject(y.DOCUMENT),i.\u0275\u0275inject(Pn,8))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Ae,factory:Ae.\u0275fac,providedIn:"root"})}}var An=d(34268),mt=d.n(An);const kn="(?=^.{1,250}$)^[\u0430-\u044F\u0410-\u042Fa-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[\u0430-\u044F\u0410-\u042Fa-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[\u0430-\u044F\u0410-\u042Fa-zA-Z0-9](?:[\u0430-\u044F\u0410-\u042Fa-zA-Z0-9-]*[\u0430-\u044F\u0410-\u042Fa-zA-Z0-9])?\\.)+[\u0430-\u044F\u0410-\u042Fa-zA-Z0-9](?:[\u0430-\u044F\u0410-\u042Fa-zA-Z0-9-]*[\u0430-\u044F\u0410-\u042Fa-zA-Z0-9])?$",Tn=()=>new RegExp(kn,"g"),ai=()=>new RegExp(CONTAINS_EMAIL_PATTERN,"g");function jn(t){return Tn().test(t)}function ci(t){return CONTAINS_EMAIL_REGEXP().test(t)}const zt={name:"uponSanitizeElement",func:(t,e)=>{const n=e.tagName;jn(n)&&t.insertAdjacentText("afterbegin",`<${n}>`)}},$t={name:"afterSanitizeAttributes",func:(t,e)=>{const n=window?.location?.origin;if(t.nodeName==="A"&&!t.getAttribute("href")?.toLowerCase().startsWith(n)){t.setAttribute("target","_blank");let s=t.getAttribute("rel")||"";["noopener","noreferrer"].forEach(r=>{s.includes(r)||(s+=" "+r)}),t.setAttribute("rel",s.trim())}}},li=new i.InjectionToken("Represents a DOM purifier",{factory:()=>(mt().addHook(zt.name,zt.func),mt().addHook($t.name,$t.func),mt()),providedIn:"platform"});var ui=d(26714);class Rn{static create(e){return new e}}class q{constructor(){this.speechResult=new p.Subject,this.speechEnd=new p.Subject}static _getInternalApiClass(){return window.SpeechRecognition||window.webkitSpeechRecognition}static isSupported(){return q._getInternalApiClass()!==void 0}_subscribeEvents(){this._internalApi.addEventListener("result",this.onResult.bind(this)),this._internalApi.addEventListener("speechend",this.onSpeechEnd.bind(this))}_unsubscribeEvents(){this._internalApi.removeEventListener("result",this.onResult),this._internalApi.removeEventListener("speechend",this.onSpeechEnd)}init(e){const n=q._getInternalApiClass();this._internalApi=Rn.create(n),this._internalApi.continuous=!0,this._internalApi.lang=e.lang||"en-US",this._subscribeEvents()}onResult(e){const{resultIndex:n,results:s}=e,r=s[n][0];if(!r)throw new Error("No results to transcript");this.speechResult.next(r.transcript)}onSpeechEnd(){this.speechEnd.next()}destroy(){this._unsubscribeEvents(),this._internalApi=null}startRecognition(){this._internalApi.start()}stopRecognition(){this._internalApi.stop()}static{this.\u0275fac=function(n){return new(n||q)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:q,factory:q.\u0275fac})}}var Ln=d(73436);class Nn{get messages$(){return this._messages$}constructor(e,n){this._ngZone=n;const s=new p.Subject;this._messages$=s.pipe(this._runInZone(this._ngZone)),this._broadcastChannel=new Ln.BroadcastChannel(e),this._broadcastChannel.onmessage=r=>s.next(r)}_runInZone(e){return n=>new p.Observable(s=>{n.subscribe(r=>e.run(()=>s.next(r)))})}publish(e){return(0,p.from)(this._broadcastChannel.postMessage(e))}}class ke{constructor(e){this._ngZone=e}createInstance(e){return new Nn(e,this._ngZone)}static{this.\u0275fac=function(n){return new(n||ke)(i.\u0275\u0275inject(i.NgZone))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:ke,factory:ke.\u0275fac,providedIn:"root"})}}class di{static toColdObservable(e){return new Observable(n=>{e().subscribe(r=>{n.next(r),n.complete()})})}}class Te{log(e,n,...s){console.log(e,...s)}warn(e,n,...s){console.warn(e,...s)}error(e,n,...s){console.error(e,...s)}exception(e,n,...s){(console.exception||console.error)(e,...s)}static{this.\u0275fac=function(n){return new(n||Te)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Te,factory:Te.\u0275fac})}}const hi={dataAccess:"data-access",feature:"feature",ui:"ui",util:"util",components:"components",deprecated:"deprecated"},mi={studioFree:"studio-free",studioEnterprise:"studio-enterprise",sdk:"sdk"};class pt{constructor(e,n,s=null){this._injector=e,this._registrationMap=n,this._defaultInstanceType=s}_getInstance(e,n){return n?"injectable"in n&&n.injectable!=null?this._injector.get(n.injectable):"useFactory"in n&&typeof n.useFactory=="function"?n.useFactory(e):"useValue"in n?n.useValue:null:null}_getDefaultInstance(e){return this._getInstance(e,this._defaultInstanceType)}_getInstanceByType(e){if(this._registrationMap.has(e)){const n=this._registrationMap.get(e);return this._getInstance(e,n)}}_getInstanceByPredicate(e){for(const[n,s]of this._registrationMap)if(typeof n=="function"&&n(e))return this._getInstance(e,s)}create(e=null){return e==null?this._getDefaultInstance(e):this._getInstanceByType(e)??this._getInstanceByPredicate(e)??this._getDefaultInstance(e)}static{this.\u0275fac=function(n){i.\u0275\u0275invalidFactory()}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:pt,factory:pt.\u0275fac,providedIn:"root"})}}class pi{static _createMappings(e){const n=new Map;return e=e??[],e.forEach(s=>{const r=s.predicate,o=omit(s,"predicate");n.set(r,o)}),n}static create(e){const{mappings:n,default:s,token:r}=e??{};return{provide:r,useFactory:o=>{const a=this._createMappings(n);return new Factory(o,a,s)},deps:[Injector]}}}function ft(t){return Array.isArray(t)?t:[t]}function Dn(t,e){return e.forEach(({replaceMacros:n,replaceValue:s})=>{t=t.map(r=>r===n?s??"":r)}),t}function fi(t,e){if(!t)return"";if(!e)return t;let n=[t];return e=ft(e),n=Fn(n,e),n=Dn(n,e),n.join("")}function Fn(t,e){if(!t)return[];let n=ft(t);if(!e)return n;const s=ft(e),r=s.map(({replaceMacros:o})=>o);return s.forEach(({searchValue:o,replaceMacros:a})=>{if(o&&a){const h=new RegExp(`(${a})`,"g"),E=n.map(Z=>r.includes(Z)?Z:Z.split(o).join(a).split(h));n=flatten(E)}}),n}function Un(t){return function(e){Reflect.defineMetadata("requestType",t.requestType,e)}}function gi(t){return e=>{const n=e.pipe(share()),s=n.pipe(tap(t),take(1));return concat(s,n)}}function _i(t){return e=>e.pipe(concatMap((n,s)=>t(n,s).pipe(map(r=>[n,r]))))}function Ci(t){return e=>e.pipe(mergeMap((n,s)=>t(n,s).pipe(map(r=>[n,r]))))}function wi(t){return e=>e.pipe(mergeMap((n,s)=>t(n,s).pipe(map(()=>n))))}function Ei(t){return e=>e.pipe(switchMap((n,s)=>t(n,s).pipe(map(r=>[n,r]))))}function vi(t){return e=>e.pipe(switchMap((n,s)=>t(n,s).pipe(map(()=>n))))}function bi(t){return e=>t?new Observable(n=>{const s=a=>t.run(()=>n.next(a)),r=a=>t.run(()=>n.error(a)),o=()=>t.run(()=>n.complete());return e.subscribe({next:s,error:r,complete:o})}):e}function Ii(t){return e=>t?new Observable(n=>{const s=a=>t.runOutsideAngular(()=>n.next(a)),r=a=>t.runOutsideAngular(()=>n.error(a)),o=()=>t.runOutsideAngular(()=>n.complete());return e.subscribe({next:s,error:r,complete:o})}):e}var gt=d(23710);class Bn{static initialize(){gt.config({disableDefaultAlphabetLength:!0,disableDefaultIdLength:!0,idLength:7}),gt.characters("0123456789abcdefghijklmnopqrstuvwxyz")}static generateUnique(e,n="",s="_"){const r=new RegExp(`^${n}`);return n+e.replace(r,"")+s+gt.generate()}static getUniqueIncrementalName(e,n){if(!n.includes(e))return e;let s;for(let r=1;r<=n.length;r++)if(s=`${e}-${r}`,!n.includes(s))return s;return s}}Bn.initialize();const Oi=new i.InjectionToken("An abstraction over window.navigator object",{factory:()=>window.navigator,providedIn:"root"}),Ht=new i.InjectionToken("CURRENT_TAB_ID_TOKEN"),yi={provide:Ht,useValue:Y()},xi=new i.InjectionToken("Dialog token"),je=new i.InjectionToken("WindowToken",{providedIn:"root",factory:Jt});function Jt(){return window}const Si={provide:je,useFactory:Jt};class Re{constructor(e){this._window=e,this._hasFocus=!1,this._window.addEventListener("focus",()=>{this._hasFocus=!0}),this._window.addEventListener("blur",()=>{this._hasFocus=!1})}_getIsDocumentVisible(){return document.visibilityState!=="hidden"}get hasFocus(){return this._hasFocus}get isActive(){return this._getIsDocumentVisible()}focus(){this._window.focus()}static{this.\u0275fac=function(n){return new(n||Re)(i.\u0275\u0275inject(je))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Re,factory:Re.\u0275fac,providedIn:"root"})}}class Le{constructor(e){this._injector=e}defineComponent(e,n,s=null){const r=(0,X.createCustomElement)(n,{injector:s||this._injector});customElements.get(e)||customElements.define(e,r)}static{this.\u0275fac=function(n){return new(n||Le)(i.\u0275\u0275inject(i.Injector))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Le,factory:Le.\u0275fac,providedIn:"root"})}}function Kn(t,e){return t.creatio.tabId=e,(0,p.of)(void 0)}const Mi={provide:i.APP_INITIALIZER,multi:!0,useFactory:(t,e)=>()=>Kn(t,e),deps:[je,Ht]},Gt=new i.InjectionToken("LOCAL_STORAGE_SERVICE_CONFIG");class Ne{static forRoot(e={}){return{ngModule:Ne,providers:[{provide:Gt,useValue:e}]}}static{this.\u0275fac=function(n){return new(n||Ne)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:Ne})}static{this.\u0275inj=i.\u0275\u0275defineInjector({})}}const _t="LOCAL_STORAGE_NOT_SUPPORTED";class De{constructor(e={}){this._isSupported=!1,this._prefix="ls",this._storageType="localStorage";const{prefix:n,storageType:s}=e;n!=null&&this._setPrefix(n),s!=null&&this._setStorageType(s),this._isSupported=this._checkSupport()}_deriveKey(e){return`${this._prefix}${e}`}_checkSupport(){try{const e=this._storageType in window&&window[this._storageType]!==null;if(e){this._webStorage=window[this._storageType];const n=this._deriveKey(`__${Math.round(Math.random()*1e7)}`);this._webStorage.setItem(n,""),this._webStorage.removeItem(n)}return e}catch(e){return console.error(e.message),!1}}_setPrefix(e){this._prefix=e;const n=".";this._prefix&&!this._prefix.endsWith(n)&&(this._prefix=this._prefix?`${this._prefix}${n}`:"")}_setStorageType(e){this._storageType=e}get(e){if(!this._isSupported)return console.warn(_t),null;const n=this._webStorage?this._webStorage.getItem(this._deriveKey(e)):null;if(!n||n==="null")return null;try{return JSON.parse(n)}catch{return null}}set(e,n){const s=n===void 0?null:JSON.stringify(n);if(!this._isSupported)return console.warn(_t),!1;try{this._webStorage&&this._webStorage.setItem(this._deriveKey(e),s)}catch(r){return console.error(r.message),!1}return!0}remove(...e){let n=!0;return e.forEach(s=>{this._isSupported||(console.warn(_t),n=!1);try{this._webStorage.removeItem(this._deriveKey(s))}catch(r){console.error(r.message),n=!1}}),n}static{this.\u0275fac=function(n){return new(n||De)(i.\u0275\u0275inject(Gt,8))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:De,factory:De.\u0275fac,providedIn:"root"})}}class Fe{playFromSource(e,n=!1){return(0,M.A)(function*(){const s=new Audio(e),r=s.play();if(r!==void 0)try{yield r}catch(o){if(s.muted=!0,n)throw o}})()}static{this.\u0275fac=function(n){return new(n||Fe)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Fe,factory:Fe.\u0275fac,providedIn:"root"})}}var N;(function(t){t.Small="small",t.Medium="medium",t.Large="large",t.XL="xl",t.XXL="xxl"})(N||(N={}));class Ue{constructor(e,n){this._window=e,this._document=n,this._minScreenSize=600,this._mediumScreenSize=790,this._largeScreenSize=1079,this._xlScreenSize=1280,this._screenSizeChanges$=new p.BehaviorSubject(this._currentScreenSizeType),this._changeScreenSizeType()}get currentScreenSizeType(){return this._currentScreenSizeType}get currentScreenSize(){return this._currentScreenSize}get isSmallScreen(){return this._currentScreenSizeType===N.Small}_setScreenSizeTypeAttribute(e){this._document.body.setAttribute("screen-size-type",e)}_getScreenSizeType(){return this._currentScreenSize=this._window.innerWidth,this._currentScreenSize<=this._minScreenSize?N.Small:this._currentScreenSize<=this._mediumScreenSize?N.Medium:this._currentScreenSize<=this._largeScreenSize?N.Large:this._currentScreenSize<=this._xlScreenSize?N.XL:N.XXL}_changeScreenSizeType(){const e=this._getScreenSizeType();return e===this._currentScreenSizeType?!1:(this._currentScreenSizeType=e,this._setScreenSizeTypeAttribute(e),!0)}screenSizeTypeChangeNotifier(){return this._screenSizeChanges$.asObservable()}refreshCurrentScreenSizeType(){this._changeScreenSizeType()&&this._screenSizeChanges$.next(this._currentScreenSizeType)}static{this.\u0275fac=function(n){return new(n||Ue)(i.\u0275\u0275inject(je),i.\u0275\u0275inject(y.DOCUMENT))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Ue,factory:Ue.\u0275fac,providedIn:"root"})}}const Pi=new i.InjectionToken("DESKTOP_NOTIFICATION_SENDER_PROVIDER");var Wt;(function(t){t[t.StayLoggedIn=0]="StayLoggedIn",t[t.Exit=1]="Exit",t[t.NotSet=2]="NotSet"})(Wt||(Wt={}));var zn=d(93277);class Be{constructor(){this._liveAnnouncer=(0,i.inject)(zn.LiveAnnouncer),this._translateService=(0,i.inject)(S.TranslateService)}announce(e,n,s=200){var r=this;return(0,M.A)(function*(){const o=r._translateService.instant(e);yield r._liveAnnouncer.announce(o,n,s)})()}static{this.\u0275fac=function(n){return new(n||Be)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Be,factory:Be.\u0275fac,providedIn:"root"})}}var $;(function(t){t[t.Guid=0]="Guid",t[t.Text=1]="Text",t[t.Integer=4]="Integer",t[t.Float=5]="Float",t[t.Money=6]="Money",t[t.DateTime=7]="DateTime",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Lookup=10]="Lookup",t[t.Enum=11]="Enum",t[t.Boolean=12]="Boolean",t[t.Blob=13]="Blob",t[t.Image=14]="Image",t[t.CUSTOM_OBJECT=15]="CUSTOM_OBJECT",t[t.IMAGELOOKUP=16]="IMAGELOOKUP",t[t.COLLECTION=17]="COLLECTION",t[t.Color=18]="Color",t[t.LOCALIZABLE_STRING=19]="LOCALIZABLE_STRING",t[t.ENTITY=20]="ENTITY",t[t.ENTITY_COLLECTION=21]="ENTITY_COLLECTION",t[t.ENTITY_COLUMN_MAPPING_COLLECTION=22]="ENTITY_COLUMN_MAPPING_COLLECTION",t[t.HASH_TEXT=23]="HASH_TEXT",t[t.SECURE_TEXT=24]="SECURE_TEXT",t[t.FILE=25]="FILE",t[t.MAPPING=26]="MAPPING",t[t.SHORT_TEXT=27]="SHORT_TEXT",t[t.MEDIUM_TEXT=28]="MEDIUM_TEXT",t[t.MAXSIZE_TEXT=29]="MAXSIZE_TEXT",t[t.LONG_TEXT=30]="LONG_TEXT",t[t.FLOAT1=31]="FLOAT1",t[t.FLOAT2=32]="FLOAT2",t[t.FLOAT3=33]="FLOAT3",t[t.FLOAT4=34]="FLOAT4",t[t.LOCALIZABLE_PARAMETER_VALUES_LIST=35]="LOCALIZABLE_PARAMETER_VALUES_LIST",t[t.METADATA_TEXT=36]="METADATA_TEXT",t[t.STAGE_INDICATOR=37]="STAGE_INDICATOR",t[t.OBJECT_LIST=38]="OBJECT_LIST",t[t.COMPOSITE_OBJECT_LIST=39]="COMPOSITE_OBJECT_LIST",t[t.FLOAT8=40]="FLOAT8",t[t.FILE_LOCATOR=41]="FILE_LOCATOR",t[t.PHONE_TEXT=42]="PHONE_TEXT",t[t.RICH_TEXT=43]="RICH_TEXT",t[t.WEB_TEXT=44]="WEB_TEXT",t[t.EMAIL_TEXT=45]="EMAIL_TEXT",t[t.COMPOSITE_OBJECT=46]="COMPOSITE_OBJECT"})($||($={}));class Ct extends Error{constructor(e){super(`Argument with name '${e}' is empty.`)}}class wt extends Error{constructor(e){super(`Argument with name '${e}' is out of range.`)}}class m{static checkArgumentEmpty(e,n){if(n==null)throw new Ct(e)}static checkArrayEmpty(e,n){if(m.checkArgumentEmpty(e,n),n.length===0)throw new Ct(e)}static checkStringIsNotEmpty(e,n){if(this.checkArgumentEmpty(e,n),n==="")throw new Ct(e);return n}static checkArgumentOutOfRange(e,n,s){if(s.begin&&n<s.begin)throw new wt(e);if(s.end&&n>s.end)throw new wt(e)}static checkEnumOutOfRange(e,n,s){if(!s||!Object.values(s).includes(n))throw new wt(e)}}function Ai(t){return t=t||new Date,new Date(t.getFullYear(),t.getMonth(),t.getDate())}function ki(t){return t=t||new Date,new Date(t.getFullYear(),t.getMonth(),t.getDate(),23,59,59,999)}function $n(t){if(!t)return null;function e(){throw new Error(`String "${t}" is not a valid serialized date.`)}typeof t!="string"&&e();const[n,s]=t.split("T");if(s&&(s[s.length-1]==="Z"||s.indexOf("+")!==-1||s.indexOf("-")!==-1)){const o=Date.parse(t);return isNaN(o)&&e(),new Date(o)}try{const[o,a,h]=n.split("-"),[E,Z,rn]=s.split(":"),[js,Rs]=rn.split(".");return new Date(parseInt(o),parseInt(a)-1,parseInt(h),parseInt(E),parseInt(Z),parseInt(js),parseInt(Rs))}catch{e()}}function Ti(t,e){e==null&&(e=0),t.setSeconds(t.getSeconds()+e*3600)}function ji(t,e,n){const s=n||{hour:"2-digit",minute:"2-digit"};return new Intl.DateTimeFormat(e.sysCultureName,s).format(t)}class Q{_getEntitySchemaColumnsDataValueTypesMap(e){return e.columns.reduce((n,s)=>(n[s.name]=s.dataValueType,n),{})}_getEntityColumnsDataValueTypesMap(e){return Object.keys(e).reduce((n,s)=>(n[s]=e[s].dataValueType,n),{})}_parseRawColumnValue(e,n){switch(n){case $.Date:case $.Time:case $.DateTime:return $n(e);default:return e}}_parseRawEntityObject(e,n){const s={};return Object.keys(e).forEach(r=>{const o=e[r];s[r]=n[r]?this._parseRawColumnValue(o,n[r]):o}),s}deserializeEntity(e,n){m.checkArgumentEmpty("columnsConfig",e),m.checkArgumentEmpty("rawEntity",n);const s=this._getEntityColumnsDataValueTypesMap(e);return this._parseRawEntityObject(n,s)}deserializeEntities(e,n){m.checkArgumentEmpty("columnsConfig",e),m.checkArgumentEmpty("rawEntities",n);const s=this._getEntityColumnsDataValueTypesMap(e);return n.map(r=>this._parseRawEntityObject(r,s))}deserializeEntitySchemaRecord(e,n){m.checkArgumentEmpty("entitySchema",e),m.checkArgumentEmpty("rawEntities",n);const s=this._getEntitySchemaColumnsDataValueTypesMap(e);return this._parseRawEntityObject(n,s)}deserializeEntitySchemaRecords(e,n){m.checkArgumentEmpty("entitySchema",e),m.checkArgumentEmpty("rawEntities",n);const s=this._getEntitySchemaColumnsDataValueTypesMap(e);return n.map(r=>this._parseRawEntityObject(r,s))}static{this.\u0275fac=function(n){return new(n||Q)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Q,factory:Q.\u0275fac,providedIn:"root"})}}var _=d(78240);class Vt{constructor(e,n){this.operationType=e,this.rootSchemaName=n,m.checkArgumentEmpty("_operationType",e),m.checkArgumentEmpty("_rootSchemaName",n)}getMetadata(){return(0,_.classToPlain)(this,{exposeUnsetFields:!1,excludePrefixes:["_"]})}}class Ke{static{this._instanceOfKey="devkit_BaseFilter"}static get _instanceOfKeys(){return[this._instanceOfKey]}static[Symbol.hasInstance](e){return(e?.constructor?._instanceOfKeys??[]).includes(this._instanceOfKey)}constructor(e){this.isEnabled=!0,this.trimDateTimeParameterToDate=!1,this.filterType=e}static fromJson(e,n,s){throw new Error(`fromJson not supported on filter type ${this.constructor.name}`)}serializeItem(e){return typeof e.toJson=="function"?e.toJson():(0,_.classToPlain)(e,{exposeUnsetFields:!1,excludePrefixes:["_"]})}toJson(){return(0,_.classToPlain)(this,{exposeUnsetFields:!1,excludePrefixes:["_"]})}}class P extends Ke{static{this._instanceOfKey="devkit_SingleFilter"}static get _instanceOfKeys(){return[...Ke._instanceOfKeys,this._instanceOfKey]}constructor(e,n,s){super(e),this.comparisonType=n,this.leftExpression=s?.clone()}toJson(){return{...super.toJson(),leftExpression:this.serializeItem(this.leftExpression)}}_getUsedColumns(){return this.leftExpression._getUsedColumns()}}var D;(function(t){t[t.None=0]="None",t[t.Compare=1]="Compare",t[t.IsNull=2]="IsNull",t[t.Between=3]="Between",t[t.In=4]="In",t[t.Exists=5]="Exists",t[t.FilterGroup=6]="FilterGroup"})(D||(D={}));var C;(function(t){t[t.Between=0]="Between",t[t.Contain=11]="Contain",t[t.End_with=13]="End_with",t[t.Equal=3]="Equal",t[t.Exists=15]="Exists",t[t.Greater=7]="Greater",t[t.Greater_or_equal=8]="Greater_or_equal",t[t.Is_not_null=2]="Is_not_null",t[t.Is_null=1]="Is_null",t[t.Less=5]="Less",t[t.Less_or_equal=6]="Less_or_equal",t[t.Not_contain=12]="Not_contain",t[t.Not_end_with=14]="Not_end_with",t[t.Not_equal=4]="Not_equal",t[t.Not_exists=16]="Not_exists",t[t.Not_start_with=10]="Not_start_with",t[t.Start_with=9]="Start_with"})(C||(C={}));class ze extends P{static{this._instanceOfKey="devkit_BetweenFilter"}static get _instanceOfKeys(){return[...P._instanceOfKeys,this._instanceOfKey]}constructor(e,n,s){super(D.Between,C.Between,e),this.rightLessExpression=n?.clone(),this.rightGreaterExpression=s?.clone()}static fromJson(e,n,s){return new ze(s.fromJson(e.leftExpression,n),s.fromJson(e.rightLessExpression,n),s.fromJson(e.rightGreaterExpression,n))}clone(){const e=new ze(this.leftExpression,this.rightLessExpression,this.rightGreaterExpression);return e.isEnabled=this.isEnabled,e.trimDateTimeParameterToDate=this.trimDateTimeParameterToDate,e}toJson(){return{...super.toJson(),rightLessExpression:this.serializeItem(this.rightLessExpression),rightGreaterExpression:this.serializeItem(this.rightGreaterExpression)}}_getUsedColumns(){return[...super._getUsedColumns(),...this.rightLessExpression._getUsedColumns(),...this.rightGreaterExpression._getUsedColumns()]}}class $e extends P{static{this._instanceOfKey="devkit_CompareFilter"}static get _instanceOfKeys(){return[...P._instanceOfKeys,this._instanceOfKey]}constructor(e,n,s){super(D.Compare,e,n),this.rightExpression=s?.clone()}static fromJson(e,n,s){return new $e(e.comparisonType,s.fromJson(e.leftExpression,n),s.fromJson(e.rightExpression,n))}clone(){const e=new $e(this.comparisonType,this.leftExpression,this.rightExpression);return e.isEnabled=this.isEnabled,e.trimDateTimeParameterToDate=this.trimDateTimeParameterToDate,e}toJson(){return{...super.toJson(),rightExpression:this.serializeItem(this.rightExpression)}}_getUsedColumns(){return[...super._getUsedColumns(),...this.rightExpression._getUsedColumns()]}}class ue extends P{static{this._instanceOfKey="devkit_ExistsFilter"}static get _instanceOfKeys(){return[...P._instanceOfKeys,this._instanceOfKey]}constructor(e,n,s=C.Exists,r=!0){super(D.Exists,s,e),this.subFilters=n?.clone(),this.isAggregative=r}static fromJson(e,n,s){const r=s.fromJson(e.leftExpression,n),o=e.subFilters;let a;return o&&(a=n.fromJson(e.subFilters)),new ue(r,a,e.comparisonType,e.isAggregative)}clone(){const e=new ue(this.leftExpression,this.subFilters,this.comparisonType,this.isAggregative);return e.isEnabled=this.isEnabled,e.trimDateTimeParameterToDate=this.trimDateTimeParameterToDate,e}toJson(){const e=super.toJson();return this.subFilters&&(e.subFilters=this.serializeItem(this.subFilters)),e}_getUsedColumns(){return[...super._getUsedColumns(),...this.subFilters?._getUsedColumns()??[]]}}class de extends P{static{this._instanceOfKey="devkit_InFilter"}static get _instanceOfKeys(){return[...P._instanceOfKeys,this._instanceOfKey]}constructor(e,n,s){super(D.In,e,n),this.rightExpressions=s.map(r=>r?.clone())??[]}static fromJson(e,n,s){const r=e.rightExpressions??[];return new de(e.comparisonType,s.fromJson(e.leftExpression,n),r.map(o=>s.fromJson(o,n)))}clone(){const e=new de(this.comparisonType,this.leftExpression,this.rightExpressions);return e.isEnabled=this.isEnabled,e.trimDateTimeParameterToDate=this.trimDateTimeParameterToDate,e}toJson(){return{...super.toJson(),rightExpressions:this.rightExpressions.map(e=>this.serializeItem(e))}}_getUsedColumns(){const e=this.rightExpressions.map(n=>n._getUsedColumns()).flat();return[...super._getUsedColumns(),...e]}}class F extends P{static{this._instanceOfKey="devkit_IsNullFilter"}static get _instanceOfKeys(){return[...P._instanceOfKeys,this._instanceOfKey]}constructor(e,n){[C.Is_null,C.Is_not_null].includes(e)||console.warn(`Invalid comparison type: ${C[e]} in IsNullFilter.`),super(D.IsNull,F._getComparisonType(e),n),this.isNull=!0,this.isNull=this.comparisonType===C.Is_null}static _getComparisonType(e){return e===C.Is_not_null?e:C.Is_null}static fromJson(e,n,s){return new F(F._getComparisonType(e.comparisonType),s.fromJson(e.leftExpression,n))}clone(){const e=new F(F._getComparisonType(this.comparisonType),this.leftExpression);return e.isEnabled=this.isEnabled,e.trimDateTimeParameterToDate=this.trimDateTimeParameterToDate,e}}var He;(function(t){t[t.And=0]="And",t[t.Or=1]="Or"})(He||(He={}));var Et;(function(t){t[t.None=0]="None",t[t.CurrentUser=1]="CurrentUser",t[t.CurrentUserContact=2]="CurrentUserContact",t[t.Yesterday=3]="Yesterday",t[t.Today=4]="Today",t[t.Tomorrow=5]="Tomorrow",t[t.PreviousWeek=6]="PreviousWeek",t[t.CurrentWeek=7]="CurrentWeek",t[t.NextWeek=8]="NextWeek",t[t.PreviousMonth=9]="PreviousMonth",t[t.CurrentMonth=10]="CurrentMonth",t[t.NextMonth=11]="NextMonth",t[t.PreviousQuarter=12]="PreviousQuarter",t[t.CurrentQuarter=13]="CurrentQuarter",t[t.NextQuarter=14]="NextQuarter",t[t.PreviousHalfYear=15]="PreviousHalfYear",t[t.CurrentHalfYear=16]="CurrentHalfYear",t[t.NextHalfYear=17]="NextHalfYear",t[t.PreviousYear=18]="PreviousYear",t[t.CurrentYear=19]="CurrentYear",t[t.PreviousHour=20]="PreviousHour",t[t.CurrentHour=21]="CurrentHour",t[t.NextHour=22]="NextHour",t[t.NextYear=23]="NextYear",t[t.NextNDays=24]="NextNDays",t[t.PreviousNDays=25]="PreviousNDays",t[t.NextNHours=26]="NextNHours",t[t.PreviousNHours=27]="PreviousNHours",t[t.PrimaryColumn=34]="PrimaryColumn",t[t.PrimaryDisplayColumn=35]="PrimaryDisplayColumn",t[t.PrimaryImageColumn=36]="PrimaryImageColumn",t[t.DayOfYearToday=37]="DayOfYearToday",t[t.DayOfYearTodayPlusDaysOffset=38]="DayOfYearTodayPlusDaysOffset",t[t.NextNDaysOfYear=39]="NextNDaysOfYear",t[t.PreviousNDaysOfYear=40]="PreviousNDaysOfYear",t[t.PrimaryColorColumn=41]="PrimaryColorColumn"})(Et||(Et={}));var H;(function(t){t[t.SchemaColumn=0]="SchemaColumn",t[t.Function=1]="Function",t[t.Parameter=2]="Parameter",t[t.SubQuery=3]="SubQuery",t[t.ArithmeticOperation=4]="ArithmeticOperation"})(H||(H={}));class A{static{this._instanceOfKey="devkit_BaseExpression"}static get _instanceOfKeys(){return[this._instanceOfKey]}static[Symbol.hasInstance](e){return(e?.constructor?._instanceOfKeys??[]).includes(this._instanceOfKey)}constructor(e){this.isBlock=!1,this.isBlock=e?.isBlock}static fromJson(e,n,s){throw new Error(`fromJson not supported on expression type ${this.constructor.name}`)}serializeItem(e){return typeof e.toJson=="function"?e.toJson():(0,_.classToPlain)(e,{exposeUnsetFields:!1,excludePrefixes:["_"]})}toJson(){return(0,_.classToPlain)(this,{exposeUnsetFields:!1,excludePrefixes:["_"]})}}class w extends A{static{this._instanceOfKey="devkit_ColumnExpression"}static get _instanceOfKeys(){return[...A._instanceOfKeys,this._instanceOfKey]}constructor(e){super(e),this.expressionType=H.SchemaColumn,this.columnPath=e?.columnPath}static fromJson(e){return new w({columnPath:e.columnPath})}clone(){return new w(this)}_getUsedColumns(){return[{path:this.columnPath}]}}class Je extends A{static{this._instanceOfKey="devkit_FunctionExpression"}static get _instanceOfKeys(){return[...A._instanceOfKeys,this._instanceOfKey]}constructor(e){super(e),this.expressionType=H.Function}}var J;(function(t){t[t.None=0]="None",t[t.Macros=1]="Macros",t[t.Aggregation=2]="Aggregation",t[t.DatePart=3]="DatePart",t[t.Length=4]="Length",t[t.Window=5]="Window",t[t.DateAdd=6]="DateAdd",t[t.DateDiff=7]="DateDiff"})(J||(J={}));class he extends Je{static{this._instanceOfKey="devkit_MacrosFunctionExpression"}static get _instanceOfKeys(){return[...Je._instanceOfKeys,this._instanceOfKey]}constructor(e){super(e),this.functionType=J.Macros,this.macrosType=e?.macrosType,this.functionArgument=e?.functionArgument}static fromJson(e,n,s){const r=n&&s&&e.functionArgument?s.fromJson(e.functionArgument,n):void 0;return new he({functionArgument:r,macrosType:e.macrosType})}clone(){return new he(this)}_getUsedColumns(){return this.functionArgument?._getUsedColumns()??[]}}function Hn(t){return t.getFullYear()<1970}function Jn(t){const e=t.getTimezoneOffset()*6e4;return new Date(t.getTime()-e).toISOString().slice(0,-1)}function Gn(t){const e=t.getFullYear(),n=me(t.getMonth()+1),s=me(t.getDate()),r=me(t.getHours()),o=me(t.getMinutes()),a=me(t.getSeconds()),h=Wn(t.getMilliseconds());return`${e}-${n}-${s}T${r}:${o}:${a}.${h}`}function me(t){return String(t).padStart(2,"0")}function Wn(t){return String(t).padStart(3,"0")}function Vn(t){if(!(t instanceof Date))throw new TypeError;return Hn(t)?Gn(t):Jn(t)}function Zn(t){return`"${Vn(t)}"`}class x extends A{static{this._instanceOfKey="devkit_ParameterExpression"}static get _instanceOfKeys(){return[...A._instanceOfKeys,this._instanceOfKey]}constructor(e){super(e),this.expressionType=H.Parameter;const n=e?.value;if(n instanceof Date){const s=new Date;s.setTime(n.getTime()),this.value=s}else n?this.value=typeof n=="object"?{...n}:n:this.value=n;this.dataValueType=e?.dataValueType??$.Text,this.parameter={dataValueType:this.dataValueType,...this._getParameterValueMetadata()}}static fromJson(e){return new x(e.parameter)}_convertStringToBlobArray(e){const n=[];let s=0;for(let r=0;r<e.length;r++){const o=e.charCodeAt(r);o<128?n[s++]=String.fromCharCode(o):o<2048?(n[s++]=String.fromCharCode(o>>6|192),n[s++]=String.fromCharCode(o&63|128)):(n[s++]=String.fromCharCode(o>>12|224),n[s++]=String.fromCharCode(o>>6&63|128),n[s++]=String.fromCharCode(o&63|128))}return n}_getParameterValueMetadata(){return this.dataValueType===$.Blob?{arrayValue:this.value?this._convertStringToBlobArray(this.value):[]}:this.value instanceof Date?{value:Zn(this.value)}:{value:this.value}}clone(){return new x(this)}_getUsedColumns(){return[]}}(0,u.__decorate)([(0,_.Exclude)(),(0,u.__metadata)("design:type",Object)],x.prototype,"value",void 0),(0,u.__decorate)([(0,_.Exclude)(),(0,u.__metadata)("design:type",Number)],x.prototype,"dataValueType",void 0);class G extends Ke{static{this._instanceOfKey="devkit_FilterGroup"}static get _instanceOfKeys(){return[...Ke._instanceOfKeys,this._instanceOfKey]}get items(){const e={};return this.filters.forEach((n,s)=>{e[s]=this.serializeItem(n)}),e}constructor(e=He.And,n){super(D.FilterGroup),this.filters=new Map,this.logicalOperation=e,this.rootSchemaName=n}static fromJson(e,n){const s=e.logicalOperation,r=new G(s||He.And,e.rootSchemaName);return Object.entries(e.items).forEach(([o,a])=>{r.add(n.fromJson(a),o)}),r}toJson(){const e={};return e.filterType=this.filterType,e.isEnabled=this.isEnabled,e.logicalOperation=this.logicalOperation,e.trimDateTimeParameterToDate=this.trimDateTimeParameterToDate,e.items=this.items,this.rootSchemaName&&(e.rootSchemaName=this.rootSchemaName),e}_createParameterValueExpressions(e){return e.map(n=>new x({value:n}))}getItemByIndex(e){return this.items[Object.keys(this.items)[e]]}addSchemaColumnFilterWithParameter(e,n,s,r){const o=new w({columnPath:n}),a=new x({value:s}),h=new $e(e,o,a);this.add(h,r)}addSchemaColumnInFilterWithParameters(e,n,s,r){const o=new w({columnPath:n}),a=this._createParameterValueExpressions(s),h=new de(e,o,a);this.add(h,r)}addPrimarySchemaColumnInFilter(e,n){const s=new he({macrosType:Et.PrimaryColumn}),r=this._createParameterValueExpressions(e),o=new de(C.Equal,s,r);this.add(o,n)}addSchemaColumnIsNullFilter(e,n){const s=new w({columnPath:e}),r=new F(C.Is_null,s);this.add(r,n)}addSchemaColumnIsNotNullFilter(e,n){const s=new w({columnPath:e}),r=new F(C.Is_not_null,s);this.add(r,n)}addSchemaColumnBetweenFilterWithParameters(e,n,s,r){const o=new w({columnPath:e}),a=new x({value:n}),h=new x({value:s}),E=new ze(o,a,h);this.add(E,r)}addExistsFilter(e,n,s){const r=new w({columnPath:e}),o=new ue(r,n);this.add(o,s)}addNotExistsFilter(e,n,s){const r=new w({columnPath:e}),o=new ue(r,n,C.Not_exists);this.add(o,s)}add(e,n){m.checkArgumentEmpty("filter",e);const s=n||Y();this.filters.set(s,e)}clone(){const e=new G(this.logicalOperation,this.rootSchemaName);return this.filters.forEach((n,s)=>{e.filters.set(s,n.clone())}),e.isEnabled=this.isEnabled,e.trimDateTimeParameterToDate=this.trimDateTimeParameterToDate,e}_getUsedColumns(){const e=[];return this.filters.forEach(n=>{let s=n._getUsedColumns?n._getUsedColumns():[];s=s.map(r=>({path:r.path,schemaName:r.schemaName??this.rootSchemaName})),e.push(...s)}),e}}(0,u.__decorate)([(0,_.Exclude)(),(0,u.__metadata)("design:type",Object)],G.prototype,"filters",void 0),(0,u.__decorate)([(0,_.Expose)(),(0,u.__metadata)("design:type",Object),(0,u.__metadata)("design:paramtypes",[])],G.prototype,"items",null);class Ge extends Vt{constructor(e,n){super(e,n),this.filters=new G}clearFilters(){this.filters.filters.clear()}getMetadata(){return{...super.getMetadata(),filters:this.filters.toJson()}}_getUsedColumns(){const e=this.filters._getUsedColumns();return e.forEach(n=>{n.schemaName||(n.schemaName=this.rootSchemaName)}),e}}(0,u.__decorate)([(0,_.Exclude)(),(0,u.__metadata)("design:type",Object)],Ge.prototype,"filters",void 0);var ee;(function(t){t[t.Select=0]="Select",t[t.Insert=1]="Insert",t[t.Update=2]="Update",t[t.Delete=3]="Delete"})(ee||(ee={}));class Xn extends Error{constructor(e){super(`Item with key '${e}' does not exist.`)}}var vt;(function(t){t[t.None=0]="None",t[t.Asc=1]="Asc",t[t.Desc=2]="Desc"})(vt||(vt={}));class T{constructor(e){this.orderDirection=vt.None,this.orderPosition=-1,this.isVisible=!0,this.expression=e}withOrdering(e,n){return m.checkArgumentEmpty("orderDirection",e),m.checkArgumentEmpty("orderPosition",n),m.checkArgumentOutOfRange("orderPosition",n,{begin:-1}),this.orderDirection=e,this.orderPosition=n,this}withOptions(e){return m.checkArgumentEmpty("options",e),this.isVisible=e.isVisible??!0,this}withCaption(e){return m.checkArgumentEmpty("caption",e),this.caption=e,this}_getUsedColumns(){return this.expression._getUsedColumns()}}class Yn extends T{constructor(e){super(new w({columnPath:e}))}}class pe extends A{static{this._instanceOfKey="devkit_SubQueryExpression"}static get _instanceOfKeys(){return[...A._instanceOfKeys,this._instanceOfKey]}constructor(e){super(e),this.expressionType=H.SubQuery,this.columnPath=e?.columnPath;const n=e?.subFilters;typeof n?.clone=="function"?this.subFilters=n.clone():n?(this.subFilters=new G(n.logicalOperation,n.rootSchemaName),this.subFilters.isEnabled=n.isEnabled,Object.entries(n.items).forEach(([s,r])=>{this.subFilters.add(r,s)})):this.subFilters=n,this.subOrderDirection=e.subOrderDirection,this.subOrderColumn=e.subOrderColumn}static fromJson(e,n){return new pe({columnPath:e.columnPath,subFilters:n.fromJson(e.subFilters),subOrderDirection:e.subOrderDirection,subOrderColumn:e.subOrderColumn})}clone(){return new pe(this)}toJson(){const e=super.toJson();return this.subFilters&&(e.subFilters=this.serializeItem(this.subFilters)),e}_getUsedColumns(){return[{path:this.columnPath},...this.subFilters?._getUsedColumns()??[]]}}class We extends pe{static{this._instanceOfKey="devkit_AggregationSubQueryExpression"}static get _instanceOfKeys(){return[...pe._instanceOfKeys,this._instanceOfKey]}constructor(e){super(e),this.aggregationType=e?.aggregationType,this.functionType=e?.functionType}static fromJson(e,n){const s=super.fromJson(e,n);return new We({aggregationType:e.aggregationType,functionType:e.functionType,...s})}clone(){return new We(this)}}class qn extends T{constructor(e,n,s,r,o){super(new We({aggregationType:n,columnPath:e,subFilters:s,subOrderDirection:r,subOrderColumn:o}))}}class Qn extends T{constructor(e,n){super(new x({value:e,dataValueType:n}))}}class Ve extends A{static{this._instanceOfKey="devkit_ArithmeticExpression"}static get _instanceOfKeys(){return[...A._instanceOfKeys,this._instanceOfKey]}constructor(e){super(e),this.expressionType=H.ArithmeticOperation,this.arithmeticOperation=e?.arithmeticOperation,this.leftArithmeticOperand=e?.leftArithmeticOperand.clone(),this.rightArithmeticOperand=e?.rightArithmeticOperand.clone()}static fromJson(e,n,s){const r=s?.fromJson(e.leftArithmeticOperand,n),o=s?.fromJson(e.rightArithmeticOperand,n),a={leftArithmeticOperand:r,rightArithmeticOperand:o,arithmeticOperation:e.arithmeticOperation,isBlock:e.isBlock};return new Ve(a)}clone(){return new Ve(this)}_getUsedColumns(){return[...this.leftArithmeticOperand._getUsedColumns(),...this.rightArithmeticOperand._getUsedColumns()]}}class es extends T{constructor(e,n,s){super(new Ve({arithmeticOperation:e,leftArithmeticOperand:n,rightArithmeticOperand:s}))}}class ts extends T{constructor(e){super(new he({macrosType:e}))}}class U extends Je{static{this._instanceOfKey="devkit_ArgumentFunctionExpression"}static get _instanceOfKeys(){return[...Je._instanceOfKeys,this._instanceOfKey]}constructor(e){super(e),this.functionArgument=e?.functionArgument?.clone()}toJson(){const e=super.toJson();return this.functionArgument&&(e.functionArgument=this.serializeItem(this.functionArgument)),e}_getUsedColumns(){return this.functionArgument?._getUsedColumns()??[]}}class Ze extends U{static{this._instanceOfKey="devkit_DatePartFunctionExpression"}static get _instanceOfKeys(){return[...U._instanceOfKeys,this._instanceOfKey]}constructor(e){super(e),this.functionType=J.DatePart,this.datePartType=e?.datePartType}static fromJson(e,n,s){const r=s?.fromJson(e.functionArgument,n),o=e.datePartType;return new Ze({functionArgument:r,datePartType:o,isBlock:e.isBlock})}clone(){return new Ze(this)}}class ns extends T{constructor(e,n){super(new Ze({datePartType:e,functionArgument:n}))}get datePartType(){return this.expression?.datePartType}}class fe extends U{static{this._instanceOfKey="devkit_AggregationFunctionExpression"}static get _instanceOfKeys(){return[...U._instanceOfKeys,this._instanceOfKey]}constructor(e){super(e),this.functionType=J.Aggregation,this.aggregationType=e?.aggregationType,this.aggregationEvalType=e?.aggregationEvalType}static fromJson(e,n,s){const r=s?.fromJson(e.functionArgument,n),o=e.aggregationType,a=e.aggregationEvalType;return new fe({functionArgument:r,aggregationType:o,aggregationEvalType:a,isBlock:e.isBlock})}clone(){return new fe(this)}}class ss extends T{constructor(e,n,s){super(new fe({aggregationType:e,aggregationEvalType:n,functionArgument:s}))}}class Xe extends U{static{this._instanceOfKey="devkit_LengthFunctionExpression"}static get _instanceOfKeys(){return[...U._instanceOfKeys,this._instanceOfKey]}constructor(e){super(e),this.functionType=J.Length}static fromJson(e,n,s){const r=s?.fromJson(e.functionArgument,n);return new Xe({functionArgument:r,isBlock:e.isBlock})}clone(){return new Xe(this)}}class is extends T{constructor(e){super(new Xe({functionArgument:e}))}}class Ye extends U{static{this._instanceOfKey="devkit_WindowFunctionExpression"}static get _instanceOfKeys(){return[...U._instanceOfKeys,this._instanceOfKey]}constructor(e){super(e),this.functionType=J.Window}static fromJson(e,n,s){const r=s?.fromJson(e.functionArgument,n);return new Ye({functionArgument:r,isBlock:e.isBlock})}clone(){return new Ye(this)}}class rs extends T{constructor(e){super(new Ye({functionArgument:e}))}}var qe;(function(t){t[t.None=0]="None",t[t.All=1]="All",t[t.Distinct=2]="Distinct"})(qe||(qe={}));class Qe extends Ge{constructor(e){super(ee.Select,e),this._columns=new Map,this.isDistinct=!1,this.rowCount=-1,this.rowsOffset=-1,this.useLocalization=!0,this.useRecordDeactivation=!1,this._getIsPageable=()=>this.rowCount>0&&this.rowsOffset>-1}_internalAddColumn(e,n){this._columns.has(e)||this._columns.set(e,n)}getColumn(e){if(!this._columns.has(e))throw new Xn(e);return this.findColumn(e)}findColumn(e){return this._columns.get(e)}getMetadata(){return{...super.getMetadata(),columns:{items:(0,_.classToPlain)(this._columns,{exposeUnsetFields:!1,excludePrefixes:["_"]})},allColumns:!1,isDistinct:this.isDistinct,ignoreDisplayValues:!1,rowCount:this.rowCount,rowsOffset:this.rowsOffset,adminUnitRoleSources:this.adminUnitRoleSources,isPageable:this._getIsPageable(),conditionalValues:this.conditionalValues?this.conditionalValues:null,isHierarchical:!1,hierarchicalMaxDepth:0,hierarchicalColumnName:null,hierarchicalColumnValue:null,useLocalization:this.useLocalization,useRecordDeactivation:this.useRecordDeactivation}}addColumn(e,n){return this._internalAddColumn(n,e),e}addSchemaColumn(e,n){m.checkArgumentEmpty("columnPath",e);const s=new Yn(e);return this._internalAddColumn(n||e,s),s}addAggregationSubQueryColumn(e,n,s,r){const o=new qn(e,n,s.filter,s.sortByDirection,s.sortByColumn);return this._internalAddColumn(r||e,o),o}addParameterColumn(e,n,s){const r=new Qn(e,n);return this._internalAddColumn(s,r),r}addArithmeticColumn(e,n,s,r){const o=new es(e,n,s);return this._internalAddColumn(r,o),o}addMacrosFunctionColumn(e,n){const s=new ts(e);return this._internalAddColumn(n,s),s}addDatePartFunctionColumn(e,n,s){const r=new w({columnPath:e}),o=new ns(n,r);return this._internalAddColumn(s,o),o}addAggregationFunctionColumn(e,n,s,r=qe.None){const o=new w({columnPath:e}),a=new ss(n,r,o);return this._internalAddColumn(s,a),a}addLengthFunctionColumn(e,n){const s=new w({columnPath:e}),r=new is(s);return this._internalAddColumn(n,r),r}addWindowFunctionColumn(e,n,s,r=qe.None){const o=new fe({aggregationType:n,aggregationEvalType:r,functionArgument:new w({columnPath:e})}),a=new rs(o);return this._internalAddColumn(s,a),a}_getUsedColumns(){const e=[];return this._columns.forEach(n=>{e.push(...n._getUsedColumns())}),e.forEach(n=>{n.schemaName||(n.schemaName=this.rootSchemaName)}),[...e,...super._getUsedColumns()]}}class os extends Qe{}class Zt extends Vt{constructor(e){super(ee.Insert,e),this._columnValues=new Map}get columnValues(){return{items:(0,_.classToPlain)(this._columnValues)}}addColumn(e,n,s){m.checkArgumentEmpty("columnName",e),this._columnValues.set(e,new x({value:n,dataValueType:s}))}}(0,u.__decorate)([(0,_.Expose)(),(0,u.__metadata)("design:type",Object),(0,u.__metadata)("design:paramtypes",[])],Zt.prototype,"columnValues",null);class Xt extends Ge{constructor(e){super(ee.Update,e),this._columnValues=new Map,this.isForceUpdate=!1}get columnValues(){return{items:(0,_.classToPlain)(this._columnValues)}}addColumn(e,n,s){m.checkArgumentEmpty("columnName",e),this._columnValues.set(e,new x({value:n,dataValueType:s}))}}(0,u.__decorate)([(0,_.Expose)(),(0,u.__metadata)("design:type",Object),(0,u.__metadata)("design:paramtypes",[])],Xt.prototype,"columnValues",null);class as extends Ge{constructor(e){super(ee.Delete,e)}}var ge;(function(t){t[t.General=0]="General",t[t.Limited=1]="Limited"})(ge||(ge={}));var bt;(function(t){t[t.Undefined=0]="Undefined",t[t.Filter=1]="Filter",t[t.FilterSummary=2]="FilterSummary"})(bt||(bt={}));var It;(function(t){t[t.Session=0]="Session",t[t.Workspace=1]="Workspace",t[t.Application=2]="Application"})(It||(It={}));class cs{constructor(e=It.Session,n="",s=""){this._cacheLevel=e,this._cacheGroup=n,this._cacheItemName=s}getMetadata(){return{cacheLevel:this._cacheLevel,cacheGroup:this._cacheGroup,cacheItemName:this._cacheItemName}}}class et extends Error{constructor(e){const n=e?.error?.responseStatus?.Message||e?.responseStatus?.Message||e?.message;super(n),this.errorCode=e?.error?.responseStatus?.ErrorCode}}class Yt extends Error{constructor(e){super(`Query with config
${JSON.stringify(e.getMetadata())}
finished with error.`)}}let tt=class extends L{constructor(e,n,s){super(),this._sysSettingsService=e,this._httpClient=n,this._dataServiceUri=s,this._defaultDebounceTime=200,this._debounceTimeSysSettingName="QueryExecutorDebounceTime",this._requests=new p.Subject,m.checkArgumentEmpty("_httpClient",n),m.checkArgumentEmpty("_dataServiceUri",s)}_executeWritableQuery(e,n){const r={...e.getMetadata(),queryKind:ge.General};return this._httpClient.post(n,r).pipe((0,f.catchError)(o=>{throw new et(o)}),(0,f.tap)(o=>{if(!(o&&o.success))throw new Yt(e)}))}_getQueryUri(e){if(e instanceof os)return`${this._dataServiceUri}/SelectLocalizationQuery`;if(e instanceof Qe)return`${this._dataServiceUri}/SelectQuery`;if(e instanceof Zt)return`${this._dataServiceUri}/InsertQuery`;if(e instanceof Xt)return`${this._dataServiceUri}/UpdateQuery`;if(e instanceof as)return`${this._dataServiceUri}/DeleteQuery`;throw new Error("Unsupported query type")}_getBundleSettings(){var e=this;return(0,M.A)(function*(){return e._sysSettingsService?{executionDebounceTime:(yield e._sysSettingsService.getByCodes([e._debounceTimeSysSettingName])).values[e._debounceTimeSysSettingName]?.value||e._defaultDebounceTime}:Promise.resolve({executionDebounceTime:e._defaultDebounceTime})})()}_prepareDebouncedResponsesStream(){if(this._responses)return;let e=0;const n=(0,f.buffer)(this._requests.pipe((0,f.switchMap)(()=>(0,p.from)(this._getBundleSettings())),(0,f.tap)(s=>e=s.executionDebounceTime),(0,f.debounceTime)(e)));this._responses=this._requests.pipe(n,(0,f.filter)(s=>!!s.length),(0,f.mergeMap)(s=>{const r=s.map(a=>a.id),o=s.map(a=>a.query);return this.executeBatchSelectQuery(o).pipe((0,f.map)(a=>r.reduce((h,E,Z)=>h.set(E,a[Z]),new Map)))}),(0,f.share)())}_executeThrottled(e){this._prepareDebouncedResponsesStream();const n={id:Y(),query:e},s=this._responses.pipe((0,f.filter)(r=>r.has(n.id)),(0,f.map)(r=>r.get(n.id)),(0,f.take)(1));return s.subscribe(),this._requests.next(n),s}_executeImmediate(e){m.checkArgumentEmpty("query",e);const n=this._getQueryUri(e),s=this._getQueryRequest(e);return this._httpClient.post(n,s).pipe((0,f.catchError)(r=>{throw new et(r)}),(0,f.tap)(r=>{if(!r?.rows)throw new Yt(e)}),(0,f.map)(r=>this._toSelectQueryResponse(r)))}_toSelectQueryResponse(e){const n=this.getRowsFromResponse(e);return n.rowsAffected=e.rowsAffected,e.errorInfo&&(n.errorInfo=e.errorInfo),n}_getQueryRequest(e){const n=e.getMetadata();return e instanceof Qe?{...n,queryKind:ge.General,serverESQCacheParameters:new cs().getMetadata(),queryOptimize:!1,useMetrics:!1,querySource:bt.Undefined}:{...n,queryKind:ge.General}}getRowsFromResponse(e){return e.rows}executeSelectQuery(e,n={throttled:!1}){return n.throttled?this._executeThrottled(e):this._executeImmediate(e)}executeInsertQuery(e){return this.execute(e)}executeUpdateQuery(e){return this.execute(e)}executeDeleteQuery(e){return this.execute(e)}execute(e){m.checkArgumentEmpty("query",e);const n=this._getQueryUri(e);return this._executeWritableQuery(e,n)}executeBatchSelectQuery(e){if(m.checkArgumentEmpty("queries",e),e.length===0)return(0,p.of)([]);const n=`${this._dataServiceUri}/BatchQuery`,s={items:[]};return s.items=e.map(r=>({...this._getQueryRequest(r),__type:"Terrasoft.Nui.ServiceModel.DataContract.SelectQuery"})),this._httpClient.post(n,s).pipe((0,f.catchError)(r=>{throw new et(r)}),(0,f.tap)(r=>{if(!r||r.hasErrors)throw new et(r)}),(0,f.map)(r=>r.queryResults.map(o=>this._toSelectQueryResponse(o))))}commitTransaction(e){throw new Error("Method not implemented.")}rollbackTransaction(e){throw new Error("Method not implemented.")}};tt=(0,u.__decorate)([(0,u.__param)(0,(0,i.Optional)()),(0,u.__param)(2,(0,i.Inject)(Pe)),(0,u.__metadata)("design:paramtypes",[R,v.HttpClient,String])],tt);let Ot=class ct extends tt{constructor(e,n,s,r){super(e,n,r),this._entityDeserializer=s}getRowsFromResponse(e){return this._entityDeserializer.deserializeEntities(e.rowConfig,e.rows)}static{this.\u0275fac=function(n){return new(n||ct)(i.\u0275\u0275inject(R,8),i.\u0275\u0275inject(v.HttpClient),i.\u0275\u0275inject(Q),i.\u0275\u0275inject(Pe))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:ct,factory:ct.\u0275fac})}};Ot=(0,u.__decorate)([Un({requestType:"crt.DataServiceQueryExecutor"}),(0,u.__metadata)("design:paramtypes",[R,v.HttpClient,Q,String])],Ot);class _e{static{this.\u0275fac=function(n){return new(n||_e)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:_e})}static{this.\u0275inj=i.\u0275\u0275defineInjector({providers:[Kt,{provide:L,useClass:Ot}]})}}class yt{static{this.\u0275fac=function(n){return new(n||yt)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:yt})}static{this.\u0275inj=i.\u0275\u0275defineInjector({providers:[Kt,{provide:L,useFactory:(e,n,s)=>new tt(e,n,s),deps:[[new i.Optional,R],v.HttpClient,Pe]}]})}}class c{constructor(e,n,s){this.id=e,this.name=n,this.imgUrl=s}}const ls="/img/entity/hash/SysImage/Data/",Ri="/DataService/json/SyncReply";function us(t){return t.endsWith("/")||(t+="/"),t}function ds(t){return t.replace(/(^([/\\])+)|(([/\\])+$)/,"")}function hs(t){return t=t.replace(location.hash,""),t.replace(location.search,"")}function ms(t){return`${ps()}/Navigation/Navigation.aspx?schemaName=${t}`}function Li(){return"/"}function W(){let t=location.pathname;const e=t.match(/.*?\/\d\/?/);return e&&e.length===1?t=us(e[0]):t="",fs(location.origin,t)}function qt(){let t=location.href.replace(W(),"");return t=hs(t),t||"/"}function Ni(){const t=qt(),e=W(),n=t.split("/").filter(Boolean)[0];return n?`${e}${n}/`:e}function xt(){let e=W().replace(location.origin,"");return e.endsWith("/")&&(e=e.substring(0,e.length-1)),e}function ps(){return W().replace(/\/0\/?$|\/+$/,"")}function fs(...t){return t.map(e=>ds(e)).join("/")}function Di(t,e){return`${ms(t)}&recordId=${e}`}function Fi(t,e){function n(a,h){return a.toLowerCase().replace(h,"").split("/").filter(E=>E).join("/")}const s=W().toLowerCase(),r=n(t,s),o=n(e,s);return r===o}function gs(t){return t?xt()+ls+t:null}function Ui(){return xt()+esqServiceUrl}function Bi(t){const{uId:e,name:n,packageUId:s}=t;if(!e&&!n)throw new Error("uId or name is required");const r=W(),o=qt();let a=`${r}${o}#/InterfaceDesigner/${e||n}`;return s&&(a+=`?packageUId=${s}`),a}class Ce{constructor(e){this._queryExecutor=e}setColumnsToEsq(e){e.addSchemaColumn("Id"),e.addSchemaColumn("Name"),e.addSchemaColumn("PreviewImage")}setFiltersToEsq(e,n){e.filters.addSchemaColumnFilterWithParameter(C.Equal,"ConfigType",n)}executeSelectQuery(e){return this._queryExecutor.executeSelectQuery(e).pipe((0,f.map)(n=>n.map(s=>new c(s.Id,s.Name,gs(s.PreviewImage.value)))))}getTemplates(e){const n=new Qe("EmailTemplate");return this.setColumnsToEsq(n),this.setFiltersToEsq(n,e),this.executeSelectQuery(n)}static{this.\u0275fac=function(n){return new(n||Ce)(i.\u0275\u0275inject(L))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Ce,factory:Ce.\u0275fac,providedIn:"root"})}}const l="https://i.pinimg.com/originals/e4/10/a1/e410a11ea785f730d3d46b80f2c79bcb.png",_s=[new c("Id1","name1 name11 name12 name13 name14 name15 name16 name17 name18 name19",l),new c("Id2","name2",null),new c("Id3","name3",l),new c("Id4","name4",l),new c("Id5","name5",l),new c("Id6","name6",l),new c("Id7","name7",l),new c("Id8","name8",l),new c("Id9","name9",l),new c("Id10","name10",l),new c("Id11","name11",l),new c("Id12","name12",l),new c("Id13","name13",l),new c("Id14","name14",l),new c("Id15","name15",l),new c("Id16","name16",l),new c("Id17","name17",l),new c("Id18","name18",l),new c("Id19","name19",l),new c("Id20","name20",l),new c("Id21","name21",l),new c("Id22","name22",l),new c("Id23","name23",l),new c("Id24","name24",l),new c("Id25","name25",l)],Cs=[new c("Id1","Mjmlname1 name11 name12 name13 name14 name15 name16 name17 name18 name19",l),new c("Id2","Mjmlname2",null),new c("Id3","Mjmlname3",l),new c("Id4","Mjmlname4",l),new c("Id5","Mjmlname5",l),new c("Id6","Mjmlname6",l),new c("Id7","Mjmlname7",l),new c("Id8","Mjmlname8",l),new c("Id9","Mjmlname9",l),new c("Id10","Mjmlname10",l),new c("Id11","Mjmlname11",l),new c("Id12","Mjmlname12",l),new c("Id13","Mjmlname13",l),new c("Id14","Mjmlname14",l),new c("Id15","Mjmlname15",l),new c("Id16","Mjmlname16",l),new c("Id17","Mjmlname17",l),new c("Id18","Mjmlname18",l),new c("Id19","Mjmlname19",l),new c("Id20","Mjmlname20",l),new c("Id21","Mjmlname21",l),new c("Id22","Mjmlname22",l),new c("Id23","Mjmlname23",l),new c("Id24","Mjmlname24",l),new c("Id25","Mjmlname25",l)];class we{getTemplates(e){return e===1?(0,p.of)(Cs):(0,p.of)(_s)}static{this.\u0275fac=function(n){return new(n||we)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:we,factory:we.\u0275fac,providedIn:"root"})}}class ws{}var St;(function(t){t[t.PREVIEW=0]="PREVIEW",t[t.LIST=1]="LIST"})(St||(St={}));class k{constructor(){this._selectedItems=new p.BehaviorSubject([])}get selectedItems(){return this._selectedItems.asObservable()}getSelectedItems(){return this._selectedItems.getValue()}toggleSelectedItem(e){this._selectedItems.getValue().find(s=>e.id===s.id)?this.clear():this._selectedItems.next([e])}setSelectedItem(e){this._selectedItems.next([e])}clear(){this._selectedItems.next([])}static{this.\u0275fac=function(n){return new(n||k)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:k,factory:k.\u0275fac})}}var V=d(56711),nt=d(88763),Mt=d(70987),st=d(6149);class Ee{constructor(e,n){this.dataStore=e,this.cdr=n,this.itemPicked=new i.EventEmitter}isItemSelected(e){return this.dataStore.getSelectedItems().indexOf(e)!==-1}ngOnInit(){this.selectedItemsSubscription=this.dataStore.selectedItems.subscribe(e=>{this.cdr.destroyed||this.cdr.detectChanges()})}ngOnDestroy(){this.selectedItemsSubscription.unsubscribe()}onClick(e){this.dataStore.toggleSelectedItem(e)}onDblClick(e){this.dataStore.setSelectedItem(e),this.itemPicked.emit()}static{this.\u0275fac=function(n){return new(n||Ee)(i.\u0275\u0275directiveInject(k),i.\u0275\u0275directiveInject(i.ChangeDetectorRef))}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:Ee,inputs:{searchValue:"searchValue",items:"items",previewVisible:"previewVisible"},outputs:{itemPicked:"itemPicked"}})}}var it=d(73479);const Es=["previewImageWrapper"],vs=t=>({"default-image":t});class te{constructor(e,n){this.dataStore=e,this.cdr=n}scrollToTop(){const e=this.previewImageWrapper?.nativeElement||null;e&&(e.scrollTop=0)}hasImage(){return this.item!=null&&this.item.imgUrl!=null&&this.item.imgUrl!==""}ngOnInit(){this.selectedItemsSubscription=this.dataStore.selectedItems.subscribe(e=>{this.scrollToTop(),this.item=e[0],this.cdr.detectChanges()})}ngOnDestroy(){this.selectedItemsSubscription.unsubscribe()}static{this.\u0275fac=function(n){return new(n||te)(i.\u0275\u0275directiveInject(k),i.\u0275\u0275directiveInject(i.ChangeDetectorRef))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:te,selectors:[["ts-preview-pane"]],viewQuery:function(n,s){if(n&1&&i.\u0275\u0275viewQuery(Es,5),n&2){let r;i.\u0275\u0275queryRefresh(r=i.\u0275\u0275loadQuery())&&(s.previewImageWrapper=r.first)}},decls:8,vars:5,consts:[["previewImageWrapper",""],[1,"preview-container"],[1,"preview-image-wrapper",3,"ngClass"],[3,"src"],[1,"preview-label-wrapper"]],template:function(n,s){n&1&&(i.\u0275\u0275elementStart(0,"div",1)(1,"div",2,0),i.\u0275\u0275element(3,"img",3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div",4)(5,"p"),i.\u0275\u0275text(6),i.\u0275\u0275elementEnd()(),i.\u0275\u0275element(7,"div"),i.\u0275\u0275elementEnd()),n&2&&(i.\u0275\u0275advance(),i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(3,vs,!s.hasImage())),i.\u0275\u0275advance(2),i.\u0275\u0275propertyInterpolate("src",s.item==null?null:s.item.imgUrl,i.\u0275\u0275sanitizeUrl),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(s.item==null?null:s.item.name))},dependencies:[y.NgClass],styles:[`.preview-container[_ngcontent-%COMP%]{height:100%;width:calc(100% - 10px);margin-inline-start:10px;display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-start;position:absolute}.preview-container[_ngcontent-%COMP%]   .default-image[_ngcontent-%COMP%]{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='64.781' height='33.636' viewBox='0 0 64.781 33.636'%3E%3Cdefs%3E%3Cstyle%3E.a%7Bfill:%23006ce0;%7D%3C/style%3E%3C/defs%3E%3Ccircle class='a' cx='5.606' cy='5.606' r='5.606' transform='translate(38.619)'/%3E%3Cpath class='a' d='M2579.792,595l19.932-29.9,26.161,29.9h-46.094Z' transform='translate(-2579.792 -561.367)'/%3E%3Cpath class='a' d='M2629.623,595l-7.475-11.212,7.475-3.737L2644.572,595h-14.949Z' transform='translate(-2579.792 -561.367)'/%3E%3C/svg%3E");background-position:center;background-repeat:no-repeat}.preview-container[_ngcontent-%COMP%]   .default-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:none}.preview-container[_ngcontent-%COMP%]   .preview-image-wrapper[_ngcontent-%COMP%]{overflow-y:auto;overflow-x:hidden;align-self:stretch;height:100%;border:1px solid #e2e2e2}.preview-container[_ngcontent-%COMP%]   .preview-image-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;position:relative;box-shadow:none!important;margin:0;padding:0}.preview-container[_ngcontent-%COMP%]   .preview-label-wrapper[_ngcontent-%COMP%]{width:100%}.preview-container[_ngcontent-%COMP%]   .preview-label-wrapper[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{align-self:stretch;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;min-height:2.8em;font-size:1.4em;line-height:1.4em;text-align:center;margin-block-start:.2em;margin-block-end:.2em;padding:2px;direction:initial}`],changeDetection:0})}}const bs={leading:!1,trailing:!0};class ne{constructor(e){this._element=e,this.tsClick=new i.EventEmitter,this.tsDblClick=new i.EventEmitter}_elementClickHandler(e){switch(e.detail){case 1:this.tsClick.emit(e);break;case 2:this.tsDblClick.emit(e);break;default:this.tsDblClick.emit(e);break}}ngAfterViewInit(){const e=(0,p.fromEvent)(this._element.nativeElement,"click").pipe((0,f.throttleTime)(250,p.asyncScheduler,bs));this._subscription=e.subscribe(n=>{this._elementClickHandler(n)})}ngOnDestroy(){this._subscription.unsubscribe()}static{this.\u0275fac=function(n){return new(n||ne)(i.\u0275\u0275directiveInject(i.ElementRef))}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:ne,selectors:[["","tsClickController",""]],outputs:{tsClick:"tsClick",tsDblClick:"tsDblClick"}})}}class se{transform(e,n,s){return s?(s=s.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),(e||[]).filter(r=>n.split(",").some(o=>Object.hasOwn(r,o)&&new RegExp(s,"gi").test(r[o])))):e}static{this.\u0275fac=function(n){return new(n||se)}}static{this.\u0275pipe=i.\u0275\u0275definePipe({name:"filter",type:se,pure:!0})}}function Is(t,e){if(t&1){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"mat-list-option",5),i.\u0275\u0275listener("tsClick",function(){const r=i.\u0275\u0275restoreView(n).$implicit,o=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(o.onClick(r))})("tsDblClick",function(){const r=i.\u0275\u0275restoreView(n).$implicit,o=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(o.onDblClick(r))}),i.\u0275\u0275elementStart(1,"p",6),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd()()}if(t&2){const n=e.$implicit,s=i.\u0275\u0275nextContext();i.\u0275\u0275property("value",n)("selected",s.isItemSelected(n)),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",n.name," ")}}function Os(t,e){t&1&&(i.\u0275\u0275elementStart(0,"div",7),i.\u0275\u0275element(1,"ts-preview-pane"),i.\u0275\u0275elementEnd())}class ve extends Ee{constructor(e,n){super(e,n)}static{this.\u0275fac=function(n){return new(n||ve)(i.\u0275\u0275directiveInject(k),i.\u0275\u0275directiveInject(i.ChangeDetectorRef))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:ve,selectors:[["ts-table-list"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:6,vars:7,consts:[[1,"table-list-container"],[1,"grid-column"],[3,"ngClass"],["tsClickController","",3,"value","selected","tsClick","tsDblClick",4,"ngFor","ngForOf"],["class","preview-column",4,"ngIf"],["tsClickController","",3,"tsClick","tsDblClick","value","selected"],[1,"preview-text"],[1,"preview-column"]],template:function(n,s){n&1&&(i.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"mat-selection-list",2),i.\u0275\u0275template(3,Is,3,3,"mat-list-option",3),i.\u0275\u0275pipe(4,"filter"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(5,Os,2,0,"div",4),i.\u0275\u0275elementEnd()),n&2&&(i.\u0275\u0275advance(2),i.\u0275\u0275property("ngClass","checkbox-hidden"),i.\u0275\u0275advance(),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBind3(4,3,s.items,"name",s.searchValue)),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",s.previewVisible))},dependencies:[y.NgClass,y.NgForOf,y.NgIf,it.MatLegacySelectionList,it.MatLegacyListOption,te,ne,se],styles:[".mat-list-base{font-size:1.2em!important;font-family:inherit}  .mat-list-base .mat-list-option{font-size:1.2em!important;font-family:inherit}  .mat-list-base .mat-list-item{border-top:1px solid #e0e0e0}  .mat-list-base .mat-list-item:last-child{border-bottom:1px solid #e0e0e0}  .mat-list-base .mat-list-item:hover{background-color:#f6f6f6!important}  .mat-list-base .mat-list-item:focus{background-color:transparent!important}  .mat-list-base .mat-pseudo-checkbox-checked{background:#006ce0!important}.table-list-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:row;justify-content:flex-start;align-content:stretch}.table-list-container[_ngcontent-%COMP%]   .grid-column[_ngcontent-%COMP%]{flex-grow:2.5;height:100%;position:relative}.table-list-container[_ngcontent-%COMP%]   .grid-column[_ngcontent-%COMP%]   .mat-selection-list[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%;overflow:auto;padding-top:0!important}.table-list-container[_ngcontent-%COMP%]   .grid-column[_ngcontent-%COMP%]   .checkbox-hidden[_ngcontent-%COMP%]  .mat-list-item[aria-selected=true]{background-color:#e4ebfa!important}.table-list-container[_ngcontent-%COMP%]   .grid-column[_ngcontent-%COMP%]   .checkbox-hidden[_ngcontent-%COMP%]  .mat-list-item .mat-list-item-content .mat-pseudo-checkbox{display:none!important}.table-list-container[_ngcontent-%COMP%]   .grid-column[_ngcontent-%COMP%]   .checkbox-hidden[_ngcontent-%COMP%]  .mat-list-item .mat-list-item-content .mat-list-text{padding-inline-start:0!important}.table-list-container[_ngcontent-%COMP%]   .grid-column[_ngcontent-%COMP%]   .preview-text[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;margin-block-start:.2em;margin-block-end:.2em;padding:2px}.table-list-container[_ngcontent-%COMP%]   .preview-column[_ngcontent-%COMP%]{flex-grow:1;height:100%;position:relative}"],changeDetection:0})}}var b=d(95567),rt=d(23883);class be{constructor(e){this._element=e,this.elementVisible=new i.EventEmitter,this.callbackForIntersection=n=>{n.forEach(s=>{this.isIntersection(s)&&(this.elementVisible.emit(),this._intersectionObserver.unobserve(this._element.nativeElement),this._intersectionObserver.disconnect())})}}isIntersection(e){return e.isIntersecting&&e.target===this._element.nativeElement}ngAfterViewInit(){this._intersectionObserver=new IntersectionObserver(e=>{this.callbackForIntersection(e)},{}),this._intersectionObserver.observe(this._element.nativeElement)}static{this.\u0275fac=function(n){return new(n||be)(i.\u0275\u0275directiveInject(i.ElementRef))}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:be,selectors:[["","tsLazyLoad",""]],outputs:{elementVisible:"elementVisible"}})}}const ys=t=>({"list-cell-preview-container-selected":t}),xs=(t,e)=>({"image-container-selected":t,"default-image":e});function Ss(t,e){if(t&1){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",12),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(n);const r=i.\u0275\u0275nextContext(2);return i.\u0275\u0275resetView(r.changeItemClickAnimationState())}),i.\u0275\u0275elementStart(1,"div",13),i.\u0275\u0275element(2,"img",14),i.\u0275\u0275elementEnd()()}if(t&2){const n=i.\u0275\u0275nextContext().$implicit,s=i.\u0275\u0275nextContext();i.\u0275\u0275property("@tsItemAppearAnimationTrigger",void 0)("ngClass",i.\u0275\u0275pureFunction1(4,ys,s.isItemSelected(n))),i.\u0275\u0275advance(),i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction2(6,xs,s.isItemSelected(n),n.imgUrl===null)),i.\u0275\u0275advance(),i.\u0275\u0275propertyInterpolate("src",n==null?null:n.imgUrl,i.\u0275\u0275sanitizeUrl)}}function Ms(t,e){if(t&1){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0,7),i.\u0275\u0275elementStart(1,"div",8),i.\u0275\u0275listener("tsClick",function(){const r=i.\u0275\u0275restoreView(n).$implicit,o=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(o.onClick(r))})("tsDblClick",function(){const r=i.\u0275\u0275restoreView(n).$implicit,o=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(o.onDblClick(r))}),i.\u0275\u0275elementStart(2,"mat-grid-tile")(3,"div",9),i.\u0275\u0275listener("elementVisible",function(){const r=i.\u0275\u0275restoreView(n).$implicit,o=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(o.setItemVisible(r))}),i.\u0275\u0275template(4,Ss,3,9,"div",10),i.\u0275\u0275elementStart(5,"p",11),i.\u0275\u0275text(6),i.\u0275\u0275elementEnd()()()(),i.\u0275\u0275elementContainerEnd()}if(t&2){const n=e.$implicit,s=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("@tsItemClickAnimationTrigger",s.itemClickAnimationState),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",s.isItemVisible(n)),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(n==null?null:n.name)}}function Ps(t,e){t&1&&(i.\u0275\u0275elementStart(0,"div",15),i.\u0275\u0275element(1,"ts-preview-pane"),i.\u0275\u0275elementEnd())}class Ie extends Ee{constructor(e,n){super(e,n),this.visibleItems=[],this.itemClickAnimationState="normal"}changeItemClickAnimationState(){this.itemClickAnimationState=this.itemClickAnimationState==="normal"?"click":"normal"}setItemVisible(e){this.visibleItems.indexOf(e)===-1&&this.visibleItems.push(e)}isItemVisible(e){return this.visibleItems.indexOf(e)!==-1}static{this.\u0275fac=function(n){return new(n||Ie)(i.\u0275\u0275directiveInject(k),i.\u0275\u0275directiveInject(i.ChangeDetectorRef))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:Ie,selectors:[["ts-icon-list"]],inputs:{previewItemsPerRow:"previewItemsPerRow"},features:[i.\u0275\u0275InheritDefinitionFeature],decls:8,vars:7,consts:[["templatesGridListView",""],[1,"preview-list-container"],["data-item-marker","grid-column",1,"grid-column"],[1,"mat-grid-list-container"],["rowHeight","1:1.25",3,"cols"],["class","preview-cell",4,"ngFor","ngForOf"],["class","preview-column",4,"ngIf"],[1,"preview-cell"],["tsClickController","",3,"tsClick","tsDblClick"],["tsLazyLoad","",1,"list-cell",3,"elementVisible"],["class","list-cell-preview-container",3,"ngClass","click",4,"ngIf"],[1,"preview-text"],[1,"list-cell-preview-container",3,"click","ngClass"],[1,"image-container",3,"ngClass"],[1,"image",3,"src"],[1,"preview-column"]],template:function(n,s){n&1&&(i.\u0275\u0275elementStart(0,"div",1)(1,"div",2)(2,"div",3)(3,"mat-grid-list",4,0),i.\u0275\u0275template(5,Ms,7,3,"ng-container",5),i.\u0275\u0275pipe(6,"filter"),i.\u0275\u0275elementEnd()()(),i.\u0275\u0275template(7,Ps,2,0,"div",6),i.\u0275\u0275elementEnd()),n&2&&(i.\u0275\u0275advance(3),i.\u0275\u0275propertyInterpolate("cols",s.previewItemsPerRow),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBind3(6,3,s.items,"name",s.searchValue)),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",s.previewVisible))},dependencies:[y.NgClass,y.NgForOf,y.NgIf,rt.MatGridList,rt.MatGridTile,te,be,ne,se],styles:[`.preview-list-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:row;justify-content:flex-start;align-content:stretch}.preview-list-container[_ngcontent-%COMP%]   .grid-column[_ngcontent-%COMP%]{flex-grow:2.5;height:100%;position:relative}.preview-list-container[_ngcontent-%COMP%]   .grid-column[_ngcontent-%COMP%]   .mat-grid-list-container[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%;overflow:auto}.preview-list-container[_ngcontent-%COMP%]   .grid-column[_ngcontent-%COMP%]   .mat-list-base[_ngcontent-%COMP%]{padding-top:0!important}.preview-list-container[_ngcontent-%COMP%]   .grid-column[_ngcontent-%COMP%]   .list-cell[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:flex-start;align-items:stretch}.preview-list-container[_ngcontent-%COMP%]   .grid-column[_ngcontent-%COMP%]   .list-cell[_ngcontent-%COMP%]   .list-cell-preview-container[_ngcontent-%COMP%]{align-self:stretch;overflow:hidden;height:100%;border-radius:unset;background:#f6f6f6;margin:5px;border:1px solid #e2e2e2}.preview-list-container[_ngcontent-%COMP%]   .grid-column[_ngcontent-%COMP%]   .list-cell[_ngcontent-%COMP%]   .list-cell-preview-container[_ngcontent-%COMP%]:hover{border:1px solid #006ce0}.preview-list-container[_ngcontent-%COMP%]   .grid-column[_ngcontent-%COMP%]   .list-cell[_ngcontent-%COMP%]   .list-cell-preview-container[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{overflow:hidden;height:100%;padding:0 25px;box-shadow:none}.preview-list-container[_ngcontent-%COMP%]   .grid-column[_ngcontent-%COMP%]   .list-cell[_ngcontent-%COMP%]   .list-cell-preview-container[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{max-width:100%}.preview-list-container[_ngcontent-%COMP%]   .grid-column[_ngcontent-%COMP%]   .list-cell[_ngcontent-%COMP%]   .list-cell-preview-container[_ngcontent-%COMP%]   .default-image[_ngcontent-%COMP%]{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='64.781' height='33.636' viewBox='0 0 64.781 33.636'%3E%3Cdefs%3E%3Cstyle%3E.a%7Bfill:%23006ce0;%7D%3C/style%3E%3C/defs%3E%3Ccircle class='a' cx='5.606' cy='5.606' r='5.606' transform='translate(38.619)'/%3E%3Cpath class='a' d='M2579.792,595l19.932-29.9,26.161,29.9h-46.094Z' transform='translate(-2579.792 -561.367)'/%3E%3Cpath class='a' d='M2629.623,595l-7.475-11.212,7.475-3.737L2644.572,595h-14.949Z' transform='translate(-2579.792 -561.367)'/%3E%3C/svg%3E");background-position:center;background-repeat:no-repeat}.preview-list-container[_ngcontent-%COMP%]   .grid-column[_ngcontent-%COMP%]   .list-cell[_ngcontent-%COMP%]   .list-cell-preview-container-selected[_ngcontent-%COMP%]{border:2px solid #006ce0;transition-property:background;transition-duration:.25s;transition-timing-function:linear;background-color:#004cff24}.preview-list-container[_ngcontent-%COMP%]   .grid-column[_ngcontent-%COMP%]   .list-cell[_ngcontent-%COMP%]   .list-cell-preview-container-selected[_ngcontent-%COMP%]:hover{border:2px solid #006ce0}.preview-list-container[_ngcontent-%COMP%]   .grid-column[_ngcontent-%COMP%]   .list-cell[_ngcontent-%COMP%]   .preview-text[_ngcontent-%COMP%]{align-self:stretch;overflow:hidden;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;min-height:2.8em;font-size:1.4em;line-height:1.4em;text-align:center;text-overflow:ellipsis;margin-block-start:.2em;margin-block-end:.2em;padding:2px;direction:initial}.preview-list-container[_ngcontent-%COMP%]   .preview-column[_ngcontent-%COMP%]{flex-grow:1;height:100%;position:relative}`],data:{animation:[(0,b.trigger)("tsItemAppearAnimationTrigger",[(0,b.transition)(":enter",[(0,b.style)({opacity:0}),(0,b.animate)("0.3s ease-in",(0,b.style)({opacity:1}))])]),(0,b.trigger)("tsItemClickAnimationTrigger",[(0,b.transition)("click => normal",[(0,b.query)(".list-cell-preview-container:hover",(0,b.animate)(250,(0,b.style)({border:"1px solid #006ce0",transform:"scale(1.025)"})),{optional:!0})]),(0,b.transition)("normal => click",[(0,b.query)(".list-cell-preview-container:hover",(0,b.animate)(250,(0,b.style)({border:"2px solid #006ce0",transform:"scale(1.025)"})),{optional:!0})])])]},changeDetection:0})}}class ie{constructor(e){this.dataStore=e,this.activeViewMode=St.PREVIEW,this.previewItemsPerRow=4,this.previewVisible=!0,this.Canceled=new i.EventEmitter,this.Selected=new i.EventEmitter}_getDefaultResources(){return{localizableStrings:{Header:"\u041F\u043E\u0438\u0441\u043A: \u0428\u0430\u0431\u043B\u043E\u043D\u044B email",SearchPlaceholder:"\u041F\u043E\u0438\u0441\u043A",CancelButtonCaption:"\u041E\u0442\u043C\u0435\u043D\u0430",SelectButtonCaption:"\u0412\u044B\u0431\u0440\u0430\u0442\u044C"},localizableImages:{}}}buildEventData(){const e=new ws;return e.recordIds=[],(0,z.each)(this.dataStore.getSelectedItems(),n=>{e.recordIds.push(n.id)}),e}fireSelectEvent(){const e=this.buildEventData();this.Selected.emit(e)}mergeResources(){this.resources=(0,z.merge)(this._getDefaultResources(),this.resources)}ngOnInit(){this.mergeResources()}ngOnDestroy(){this.dataStore.clear()}onItemPicked(){this.fireSelectEvent()}onOkClick(){this.fireSelectEvent()}onCancelClick(){this.Canceled.emit()}onCloseClick(){this.Canceled.emit()}static{this.\u0275fac=function(n){return new(n||ie)(i.\u0275\u0275directiveInject(k))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:ie,selectors:[["ts-list-selection-dialog"]],inputs:{items:"items",resources:"resources",searchValue:"searchValue",activeViewMode:"activeViewMode",previewItemsPerRow:"previewItemsPerRow",previewVisible:"previewVisible"},outputs:{Canceled:"Canceled",Selected:"Selected"},decls:26,vars:17,consts:[[1,"list-selection-dialog-container"],[1,"header-container"],[1,"label-container"],[1,"close-button",3,"click"],[1,"actions-container"],[1,"search-container"],["matInput","","type","text",1,"search-field",3,"ngModelChange","ngModel","placeholder"],[1,"search-icon"],[1,"tab-actions-container"],["aria-label","",3,"ngModelChange","ngModel"],[3,"value"],[1,"preview-list","tab-radio"],[1,"table-list","tab-radio"],[1,"tab-container"],[3,"selectedIndex"],[3,"itemPicked","items","previewItemsPerRow","searchValue","previewVisible"],[3,"itemPicked","items","searchValue","previewVisible"],[1,"button-container"],["mat-button","",1,"button","cancel-button",3,"click"],["mat-button","",1,"button","submit-button",3,"click","disabled"]],template:function(n,s){n&1&&(i.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"span",2),i.\u0275\u0275text(3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div",3),i.\u0275\u0275listener("click",function(){return s.onCloseClick()}),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(5,"div",4)(6,"div",5)(7,"input",6),i.\u0275\u0275twoWayListener("ngModelChange",function(o){return i.\u0275\u0275twoWayBindingSet(s.searchValue,o)||(s.searchValue=o),o}),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(8,"div",7),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"div",8)(10,"mat-radio-group",9),i.\u0275\u0275twoWayListener("ngModelChange",function(o){return i.\u0275\u0275twoWayBindingSet(s.activeViewMode,o)||(s.activeViewMode=o),o}),i.\u0275\u0275elementStart(11,"mat-radio-button",10),i.\u0275\u0275element(12,"div",11),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(13,"mat-radio-button",10),i.\u0275\u0275element(14,"div",12),i.\u0275\u0275elementEnd()()()(),i.\u0275\u0275elementStart(15,"div",13)(16,"mat-tab-group",14)(17,"mat-tab")(18,"ts-icon-list",15),i.\u0275\u0275listener("itemPicked",function(){return s.onItemPicked()}),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(19,"mat-tab")(20,"ts-table-list",16),i.\u0275\u0275listener("itemPicked",function(){return s.onItemPicked()}),i.\u0275\u0275elementEnd()()()(),i.\u0275\u0275elementStart(21,"div",17)(22,"button",18),i.\u0275\u0275listener("click",function(){return s.onCancelClick()}),i.\u0275\u0275text(23),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(24,"button",19),i.\u0275\u0275listener("click",function(){return s.onOkClick()}),i.\u0275\u0275text(25),i.\u0275\u0275elementEnd()()()),n&2&&(i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1(" ",s.resources.localizableStrings.Header," "),i.\u0275\u0275advance(4),i.\u0275\u0275propertyInterpolate("placeholder",s.resources.localizableStrings.SearchPlaceholder),i.\u0275\u0275twoWayProperty("ngModel",s.searchValue),i.\u0275\u0275advance(3),i.\u0275\u0275twoWayProperty("ngModel",s.activeViewMode),i.\u0275\u0275advance(),i.\u0275\u0275property("value",0),i.\u0275\u0275advance(2),i.\u0275\u0275property("value",1),i.\u0275\u0275advance(3),i.\u0275\u0275property("selectedIndex",s.activeViewMode),i.\u0275\u0275advance(2),i.\u0275\u0275property("items",s.items)("previewItemsPerRow",s.previewItemsPerRow)("searchValue",s.searchValue)("previewVisible",s.previewVisible),i.\u0275\u0275advance(2),i.\u0275\u0275property("items",s.items)("searchValue",s.searchValue)("previewVisible",s.previewVisible),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1(" ",s.resources.localizableStrings.CancelButtonCaption," "),i.\u0275\u0275advance(),i.\u0275\u0275property("disabled",s.dataStore.getSelectedItems().length===0),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate1(" ",s.resources.localizableStrings.SelectButtonCaption," "))},dependencies:[V.DefaultValueAccessor,V.NgControlStatus,V.NgModel,nt.MatLegacyTabGroup,nt.MatLegacyTab,Mt.MatLegacyInput,st.MatLegacyRadioGroup,st.MatLegacyRadioButton,ve,Ie],styles:[`.mat-tab-group{width:100%;height:100%;font-family:inherit}  .mat-tab-group .mat-tab-header{border:none!important}  .mat-tab-group .mat-tab-labels{height:0px;display:none!important}  .mat-tab-group .mat-tab-labels .mat-ink-bar{display:none}  .mat-tab-group .mat-tab-body-wrapper{height:100%}  .mat-radio-container{display:none!important}.list-selection-dialog-container[_ngcontent-%COMP%]{padding-inline-start:1em;padding-inline-end:1em;display:flex;flex-direction:column;justify-content:flex-start;height:100%}.header-container[_ngcontent-%COMP%]{height:3em;margin-top:1em;display:flex;flex-direction:row;justify-content:space-between;align-content:stretch}.header-container[_ngcontent-%COMP%]   .label-container[_ngcontent-%COMP%]{color:#64b8df;font-size:2.2em}.header-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{align-self:auto;background:transparent url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12.071' height='12.071' viewBox='0 0 12.071 12.071'%3E%3Cdefs%3E%3Cstyle%3E.a%7Bfill:none;stroke:%23c8c8c8;stroke-linecap:round;%7D%3C/style%3E%3C/defs%3E%3Cg transform='translate(-742.755 -385.174)'%3E%3Cline class='a' x2='10.657' y2='10.657' transform='translate(743.462 385.881)'/%3E%3Cline class='a' x1='10.657' y2='10.657' transform='translate(743.462 385.881)'/%3E%3C/g%3E%3C/svg%3E") 0% 0% no-repeat padding-box;width:15px;height:15px;cursor:pointer}.actions-container[_ngcontent-%COMP%]{margin-top:24px;height:30px;display:flex;flex-direction:row;justify-content:space-between;align-content:stretch}.actions-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{height:30px;position:relative;display:flex;border-bottom:1px dotted #e2e2e2;padding-block-end:5px}.actions-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{height:27px;width:427px;padding-inline-start:5px;padding-inline-end:5px;border:0;outline:0;position:relative;font-size:1.4em}.actions-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]::placeholder{opacity:100!important}.actions-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]:-ms-input-placeholder{opacity:100!important}.actions-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]::-ms-input-placeholder{opacity:100!important}.actions-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]:focus::-webkit-input-placeholder{opacity:0!important}.actions-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]:focus:-moz-placeholder{opacity:0!important}.actions-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]:focus::-moz-placeholder{opacity:0!important}.actions-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]:focus:-ms-input-placeholder{opacity:0!important}.actions-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{background:transparent url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='30' height='30' viewBox='0 0 30 30'%3E%3Cdefs%3E%3Cstyle%3E.a,.d%7Bfill:none;%7D.b%7Bclip-path:url(%23a);%7D.c%7Bclip-path:url(%23b);%7D.d%7Bstroke:%238095b3;stroke-miterlimit:10;stroke-width:1.2px;%7D%3C/style%3E%3CclipPath id='a'%3E%3Crect class='a' width='30' height='30'/%3E%3C/clipPath%3E%3CclipPath id='b'%3E%3Crect class='a' width='16' height='16'/%3E%3C/clipPath%3E%3C/defs%3E%3Cg class='b'%3E%3Ccircle class='a' cx='15' cy='15' r='15'/%3E%3Cg class='c' transform='translate(7 7)'%3E%3Cg transform='translate(1 1)'%3E%3Ccircle class='d' cx='5.042' cy='5.042' r='5.042'/%3E%3Cline class='d' x2='5.042' y2='5.042' transform='translate(8.958 8.958)'/%3E%3C/g%3E%3Crect class='a' width='16' height='16'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E") 0% 0% no-repeat padding-box;height:25px;width:25px;position:relative;align-self:flex-end}.actions-container[_ngcontent-%COMP%]   .tab-actions-container[_ngcontent-%COMP%]   .table-list[_ngcontent-%COMP%]{background:transparent url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E%3Cdefs%3E%3Cstyle%3E.a%7Bfill:%238395b4;%7D.b%7Bfill:none;%7D%3C/style%3E%3C/defs%3E%3Cg transform='translate(0 0)'%3E%3Cg transform='translate(391.186 -504.034)'%3E%3Crect class='a' width='5' height='1' transform='translate(-389.186 507.534)'/%3E%3Crect class='a' width='5' height='1' transform='translate(-389.186 509.534)'/%3E%3Crect class='a' width='5' height='1' transform='translate(-389.186 511.534)'/%3E%3Crect class='a' width='5' height='1' transform='translate(-389.186 513.534)'/%3E%3Crect class='a' width='5' height='1' transform='translate(-389.186 515.534)'/%3E%3Crect class='a' width='5' height='1' transform='translate(-382.186 507.534)'/%3E%3Crect class='a' width='5' height='1' transform='translate(-382.186 509.534)'/%3E%3Crect class='a' width='5' height='1' transform='translate(-382.186 511.534)'/%3E%3Crect class='a' width='5' height='1' transform='translate(-382.186 513.534)'/%3E%3Crect class='a' width='5' height='1' transform='translate(-382.186 515.534)'/%3E%3C/g%3E%3Crect class='b' width='16' height='16'/%3E%3C/g%3E%3C/svg%3E") 0% 0% no-repeat padding-box}.actions-container[_ngcontent-%COMP%]   .tab-actions-container[_ngcontent-%COMP%]   .preview-list[_ngcontent-%COMP%]{background:transparent url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E%3Cdefs%3E%3Cstyle%3E.a%7Bfill:%238095b3;%7D.b%7Bfill:none;%7D%3C/style%3E%3C/defs%3E%3Cg transform='translate(0 0)'%3E%3Cg transform='translate(2314.701 27.803)'%3E%3Cpath class='a' d='M-2308.7-24.8v3h-4v-3h4m1-1h-6v5h6v-5Z'/%3E%3Cpath class='a' d='M-2300.7-24.8v3h-4v-3h4m1-1h-6v5h6v-5Z'/%3E%3Cpath class='a' d='M-2300.7-17.8v3h-4v-3h4m1-1h-6v5h6v-5Z'/%3E%3Cpath class='a' d='M-2308.7-17.8v3h-4v-3h4m1-1h-6v5h6v-5Z'/%3E%3C/g%3E%3Crect class='b' width='16' height='16'/%3E%3C/g%3E%3C/svg%3E") 0% 0% no-repeat padding-box}.actions-container[_ngcontent-%COMP%]   .tab-actions-container[_ngcontent-%COMP%]   .tab-radio[_ngcontent-%COMP%]{border-radius:3px;background-position:center;width:30px;height:30px}.actions-container[_ngcontent-%COMP%]   .tab-actions-container[_ngcontent-%COMP%]   .mat-radio-button[_ngcontent-%COMP%]:hover   .tab-radio[_ngcontent-%COMP%]{background-color:#f2f5ff}.actions-container[_ngcontent-%COMP%]   .tab-actions-container[_ngcontent-%COMP%]   .mat-radio-button[_ngcontent-%COMP%]:active   .tab-radio[_ngcontent-%COMP%]{background-color:#e3e9f9}.actions-container[_ngcontent-%COMP%]   .tab-actions-container[_ngcontent-%COMP%]   .mat-radio-checked[_ngcontent-%COMP%]   .tab-radio[_ngcontent-%COMP%]{border:1px solid #8395b4}.tab-container[_ngcontent-%COMP%]{margin-top:1em;margin-bottom:1em;display:flex;flex-direction:column;justify-content:flex-start;height:100%}.button-container[_ngcontent-%COMP%]{margin-bottom:1em;display:flex;flex-direction:row;justify-content:flex-end}.button-container[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{font-family:inherit;border:1px solid transparent;border-radius:2px;font-size:1.4em;text-transform:uppercase;padding-inline-end:.4em;padding-inline-start:.4em;padding-block-start:.4em;padding-block-end:.4em;margin-inline-start:5px;margin-inline-end:5px}.button-container[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:disabled{background:#ccc}.button-container[_ngcontent-%COMP%]   .submit-button[_ngcontent-%COMP%]{align-self:flex-end;background:#1c9110;color:#fff}.button-container[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]{align-self:flex-end;background:#fff;color:#006ce0}`]})}}class re{constructor(e){this.data=e,this.Canceled=new i.EventEmitter,this.Selected=new i.EventEmitter}ngOnInit(){this.selectedItemsSubscription=this.data.getTemplates(this.templateType).subscribe(e=>this.items=e)}ngOnDestroy(){this.selectedItemsSubscription.unsubscribe()}onCanceled(){this.Canceled.emit()}onSelected(e){this.Selected.emit(e)}static{this.\u0275fac=function(n){return new(n||re)(i.\u0275\u0275directiveInject("ITemplateRepository"))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:re,selectors:[["ts-email-template-lookup-gallery"]],inputs:{templateType:"templateType",resources:"resources"},outputs:{Canceled:"Canceled",Selected:"Selected"},decls:1,vars:4,consts:[[3,"Canceled","Selected","items","resources","previewItemsPerRow","previewVisible"]],template:function(n,s){n&1&&(i.\u0275\u0275elementStart(0,"ts-list-selection-dialog",0),i.\u0275\u0275listener("Canceled",function(){return s.onCanceled()})("Selected",function(o){return s.onSelected(o)}),i.\u0275\u0275elementEnd()),n&2&&i.\u0275\u0275property("items",s.items)("resources",s.resources)("previewItemsPerRow",4)("previewVisible",!0)},dependencies:[ie]})}}var Qt=d(48059),en=d(38907),tn=d(53135),nn=d(4091);class oe{static{this.\u0275fac=function(n){return new(n||oe)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:oe})}static{this.\u0275inj=i.\u0275\u0275defineInjector({providers:[k],imports:[V.FormsModule,y.CommonModule,nt.MatLegacyTabsModule,it.MatLegacyListModule,rt.MatGridListModule,tn.MatLegacyCheckboxModule,en.MatLegacyCardModule,nn.MatLegacyFormFieldModule,Mt.MatLegacyInputModule,st.MatLegacyRadioModule]})}}(function(){(typeof ngJitMode>"u"||ngJitMode)&&i.\u0275\u0275setNgModuleScope(oe,{declarations:[ie,te,ve,Ie,se,be,ne],imports:[V.FormsModule,y.CommonModule,nt.MatLegacyTabsModule,it.MatLegacyListModule,rt.MatGridListModule,tn.MatLegacyCheckboxModule,en.MatLegacyCardModule,nn.MatLegacyFormFieldModule,Mt.MatLegacyInputModule,st.MatLegacyRadioModule],exports:[ie]})})();class ae{static{this.\u0275fac=function(n){return new(n||ae)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:ae})}static{this.\u0275inj=i.\u0275\u0275defineInjector({imports:[V.FormsModule,j.BrowserModule,Qt.BrowserAnimationsModule,oe]})}}(function(){(typeof ngJitMode>"u"||ngJitMode)&&i.\u0275\u0275setNgModuleScope(ae,{declarations:[re],imports:[V.FormsModule,j.BrowserModule,Qt.BrowserAnimationsModule,oe],exports:[re]})})();class Oe{_buildRequestUrl(e){return this._isAbsoluteUrl(e)?e:y.Location.joinWithSlash(this.getUrl(),e)}_isAbsoluteUrl(e){return/^https?:\/\//i.test(e)}getUrl(){return xt()}intercept(e,n){return e=e.clone({url:this._buildRequestUrl(e.url)}),n.handle(e).pipe((0,f.catchError)(s=>(console.log(s),(0,p.throwError)(s))))}static{this.\u0275fac=function(n){return new(n||Oe)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Oe,factory:Oe.\u0275fac})}}class ce extends Oe{getUrl(){return W()}static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=i.\u0275\u0275getInheritedFactory(ce)))(s||ce)}})()}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:ce,factory:ce.\u0275fac})}}class ot{constructor(e){this._resources=e}getTranslation(e){const n=this._resources.map(({prefix:s,suffix:r})=>{const o=`${s}${e}${r}`;return fetch(o,{cache:"no-cache"}).then(a=>{if(!a.ok&&a.status!==304)throw new Error(`Loading translations failed: ${o} (${a.status})`);return a.json()})});return(0,p.from)(Promise.allSettled(n)).pipe((0,p.map)(s=>{for(const r of s.filter(o=>o.status==="rejected"))console.error(r.reason);return(0,z.merge)({},...s.filter(r=>r.status==="fulfilled").map(r=>r.value||{}))}))}static{this.\u0275fac=function(n){i.\u0275\u0275invalidFactory()}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:ot,factory:ot.\u0275fac})}}function As(t,...e){return S.TranslateModule.forRoot({...t,loader:{provide:S.TranslateLoader,useFactory:()=>new ot(e.map(n=>({prefix:n,suffix:".json"})))}})}class at{constructor(){this.title="marketing-campaign"}static{this.\u0275fac=function(n){return new(n||at)}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:at,selectors:[["creatio-marketing-campaign"]],decls:0,vars:0,template:function(n,s){}})}}const ks={production:!0},Ts=d.p+"assets/i18n/libs/",sn=[{provide:"ITemplateRepository",useClass:Ce},{provide:v.HTTP_INTERCEPTORS,useClass:ce,multi:!0}];ks.production||sn.push({provide:"ITemplateRepository",useClass:we});class ye{constructor(e,n){this._injector=e,this._translateService=n}ngDoBootstrap(){const e=(0,X.createCustomElement)(re,{injector:this._injector});this._translateService.use(this._translateService.defaultLang).subscribe(()=>customElements.define("ts-email-template-lookup-gallery",e))}static{this.\u0275fac=function(n){return new(n||ye)(i.\u0275\u0275inject(i.Injector),i.\u0275\u0275inject(S.TranslateService))}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:ye})}static{this.\u0275inj=i.\u0275\u0275defineInjector({providers:[sn],imports:[j.BrowserModule,ae,v.HttpClientModule,v.HttpClientXsrfModule.withOptions({cookieName:"BPMCSRF",headerName:"BPMCSRF"}),_e,As({defaultLanguage:"en-US"},Ts)]})}}(function(){(typeof ngJitMode>"u"||ngJitMode)&&i.\u0275\u0275setNgModuleScope(ye,{declarations:[at],imports:[j.BrowserModule,ae,v.HttpClientModule,v.HttpClientXsrfModule,_e,S.TranslateModule]})})(),j.platformBrowser().bootstrapModule(ye).catch(t=>console.error(t))},73308:(on,Pt,d)=>{d.d(Pt,{A:()=>At});function j(v,i,X,S,u,M,B){try{var K=v[M](B),O=K.value}catch(Y){X(Y);return}K.done?i(O):Promise.resolve(O).then(S,u)}function At(v){return function(){var i=this,X=arguments;return new Promise(function(S,u){var M=v.apply(i,X);function B(O){j(M,S,u,B,K,"next",O)}function K(O){j(M,S,u,B,K,"throw",O)}B(void 0)})}}}}]);
